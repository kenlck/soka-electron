"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49],{7433:function(e,t,n){n.d(t,{c:function(){return s}});var r=n(7462),o=n(7294),i=n(5852),a=n(5878);const s=o.forwardRef((({makeDefault:e,...t},n)=>{const s=(0,i.Ky)((({set:e})=>e)),l=(0,i.Ky)((({camera:e})=>e)),u=(0,i.Ky)((({size:e})=>e)),c=o.useRef();return o.useLayoutEffect((()=>{const{current:e}=c;e&&!t.manual&&(e.aspect=u.width/u.height,e.updateProjectionMatrix())}),[u,t]),o.useLayoutEffect((()=>{if(e&&c.current){const e=l;return s((()=>({camera:c.current}))),()=>s((()=>({camera:e})))}}),[l,c,e,s]),o.createElement("perspectiveCamera",(0,r.Z)({ref:(0,a.Z)([c,n])},t))}))},7854:function(e,t,n){n.d(t,{V:function(){return b}});var r=n(7462),o=n(7294),i=n(3935),a=n(9477),s=n(5852);const l=new a.Vector3,u=new a.Vector3,c=new a.Vector3;function d(e,t,n){const r=l.setFromMatrixPosition(e.matrixWorld);r.project(t);const o=n.width/2,i=n.height/2;return[r.x*o+o,-r.y*i+i]}const p=e=>Math.abs(e)<1e-10?0:e;function h(e,t,n=""){let r="matrix3d(";for(let o=0;16!==o;o++)r+=p(t[o]*e.elements[o])+(15!==o?",":")");return n+r}const f=(m=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>h(e,m));var m;const v=(e,t)=>{return h(e,[1/(n=t),1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)");var n},b=o.forwardRef((({children:e,eps:t=.001,style:n,className:h,prepend:m,center:b,fullscreen:y,portal:_,distanceFactor:E,sprite:g=!1,transform:x=!1,occlude:C,onOcclude:T,zIndexRange:O=[16777271,0],calculatePosition:w=d,as:R="div",wrapperClass:S,pointerEvents:P="auto",...I},k)=>{var D;const F=(0,s.Ky)((({gl:e})=>e)),A=(0,s.Ky)((({camera:e})=>e)),M=(0,s.Ky)((({scene:e})=>e)),L=(0,s.Ky)((({size:e})=>e)),U=(0,s.Ky)((({raycaster:e})=>e)),[z]=o.useState((()=>document.createElement(R))),N=o.useRef(null),B=o.useRef(0),V=o.useRef([0,0]),$=o.useRef(null),H=o.useRef(null),Y=null!==(D=null==_?void 0:_.current)&&void 0!==D?D:F.domElement.parentNode;o.useEffect((()=>{if(N.current){if(M.updateMatrixWorld(),x)z.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=w(N.current,A,L);z.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return Y&&(m?Y.prepend(z):Y.appendChild(z)),()=>{Y&&Y.removeChild(z),i.unmountComponentAtNode(z)}}}),[Y,x]),o.useLayoutEffect((()=>{S&&(z.className=S)}),[S]);const K=o.useMemo((()=>x?{position:"absolute",top:0,left:0,width:L.width,height:L.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:b?"translate3d(-50%,-50%,0)":"none",...y&&{top:-L.height/2,left:-L.width/2,width:L.width,height:L.height},...n}),[n,b,y,L,x]),j=o.useMemo((()=>({position:"absolute",pointerEvents:P})),[P]);o.useLayoutEffect((()=>{x?i.render(o.createElement("div",{ref:$,style:K},o.createElement("div",{ref:H,style:j},o.createElement("div",{ref:k,className:h,style:n,children:e}))),z):i.render(o.createElement("div",{ref:k,style:K,className:h,children:e}),z)}));const Q=o.useRef(!0);return(0,s.xQ)((()=>{if(N.current){A.updateMatrixWorld(),N.current.updateWorldMatrix(!0,!1);const e=x?V.current:w(N.current,A,L);if(x||Math.abs(B.current-A.zoom)>t||Math.abs(V.current[0]-e[0])>t||Math.abs(V.current[1]-e[1])>t){const t=function(e,t){const n=l.setFromMatrixPosition(e.matrixWorld),r=u.setFromMatrixPosition(t.matrixWorld),o=n.sub(r),i=t.getWorldDirection(c);return o.angleTo(i)>Math.PI/2}(N.current,A);let n=!1;"boolean"===typeof C?!0===C&&(n=[M]):Array.isArray(C)&&(n=C.map((e=>e.current)));const r=Q.current;if(n){const e=function(e,t,n,r){const o=l.setFromMatrixPosition(e.matrixWorld),i=o.clone();i.project(t),n.setFromCamera(i,t);const a=n.intersectObjects(r,!0);if(a.length){const e=a[0].distance;return o.distanceTo(n.ray.origin)<e}return!0}(N.current,A,U,n);Q.current=e&&!t}else Q.current=!t;if(r!==Q.current&&(T?T(!Q.current):z.style.display=Q.current?"block":"none"),z.style.zIndex=`${function(e,t,n){if(t instanceof a.PerspectiveCamera||t instanceof a.OrthographicCamera){const r=l.setFromMatrixPosition(e.matrixWorld),o=u.setFromMatrixPosition(t.matrixWorld),i=r.distanceTo(o),a=(n[1]-n[0])/(t.far-t.near),s=n[1]-a*t.far;return Math.round(a*i+s)}}(N.current,A,O)}`,x){const[e,t]=[L.width/2,L.height/2],n=A.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:o,left:i,bottom:a,right:s}=A,l=f(A.matrixWorldInverse),u=r?`scale(${n})translate(${p(-(s+i)/2)}px,${p((o+a)/2)}px)`:`translateZ(${n}px)`;let c=N.current.matrixWorld;g&&(c=A.matrixWorldInverse.clone().transpose().copyPosition(c).scale(N.current.scale),c.elements[3]=c.elements[7]=c.elements[11]=0,c.elements[15]=1),z.style.width=L.width+"px",z.style.height=L.height+"px",z.style.perspective=r?"":`${n}px`,$.current&&H.current&&($.current.style.transform=`${u}${l}translate(${e}px,${t}px)`,H.current.style.transform=v(c,1/((E||10)/400)))}else{const t=void 0===E?1:function(e,t){if(t instanceof a.OrthographicCamera)return t.zoom;if(t instanceof a.PerspectiveCamera){const n=l.setFromMatrixPosition(e.matrixWorld),r=u.setFromMatrixPosition(t.matrixWorld),o=t.fov*Math.PI/180,i=n.distanceTo(r);return 1/(2*Math.tan(o/2)*i)}return 1}(N.current,A)*E;z.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}V.current=e,B.current=A.zoom}}})),o.createElement("group",(0,r.Z)({},I,{ref:N}))}))},105:function(e,t,n){var r;function o(e){return e.isPerspectiveCamera}function i(e){return e.isOrthographicCamera}n.d(t,{Z:function(){return V}}),function(e){e[e.NONE=0]="NONE",e[e.ROTATE=1]="ROTATE",e[e.TRUCK=2]="TRUCK",e[e.OFFSET=3]="OFFSET",e[e.DOLLY=4]="DOLLY",e[e.ZOOM=5]="ZOOM",e[e.TOUCH_ROTATE=6]="TOUCH_ROTATE",e[e.TOUCH_TRUCK=7]="TOUCH_TRUCK",e[e.TOUCH_OFFSET=8]="TOUCH_OFFSET",e[e.TOUCH_DOLLY=9]="TOUCH_DOLLY",e[e.TOUCH_ZOOM=10]="TOUCH_ZOOM",e[e.TOUCH_DOLLY_TRUCK=11]="TOUCH_DOLLY_TRUCK",e[e.TOUCH_DOLLY_OFFSET=12]="TOUCH_DOLLY_OFFSET",e[e.TOUCH_ZOOM_TRUCK=13]="TOUCH_ZOOM_TRUCK",e[e.TOUCH_ZOOM_OFFSET=14]="TOUCH_ZOOM_OFFSET"}(r||(r={}));const a=2*Math.PI,s=Math.PI/2;function l(e,t=1e-5){return Math.abs(e)<t}function u(e,t,n=1e-5){return l(e-t,n)}function c(e,t){return Math.round(e/t)*t}function d(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function p(e){return Math.abs(e)<Number.MAX_VALUE?e:e*(1/0)}function h(e,t){t.set(0,0),e.forEach((e=>{t.x+=e.clientX,t.y+=e.clientY})),t.x/=e.length,t.y/=e.length}function f(e,t){return!!i(e)&&(console.warn(`${t} is not supported in OrthographicCamera`),!0)}function m(e){return e.invert?e.invert():e.inverse(),e}const v="undefined"!==typeof window,b=v&&/Mac/.test(navigator.platform),y=!(v&&"PointerEvent"in window),_=Object.freeze(r),E=1/8;let g,x,C,T,O,w,R,S,P,I,k,D,F,A,M,L,U,z,N,B;class V extends class{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}removeEventListener(e,t){const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}removeAllEventListeners(e){e?Array.isArray(this._listeners[e])&&(this._listeners[e].length=0):this._listeners={}}dispatchEvent(e){const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}}{constructor(e,t){if(super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=0,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.dampingFactor=.05,this.draggingDampingFactor=.25,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=r.NONE,this._viewport=null,this._dollyControlAmount=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._activePointers=[],this._truckInternal=(e,t,n)=>{if(o(this._camera)){const r=w.copy(this._camera.position).sub(this._target),o=this._camera.getEffectiveFOV()*g.MathUtils.DEG2RAD,i=r.length()*Math.tan(.5*o),a=this.truckSpeed*e*i/this._elementRect.height,s=this.truckSpeed*t*i/this._elementRect.height;this.verticalDragToForward?(n?this.setFocalOffset(this._focalOffsetEnd.x+a,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(a,0,!0),this.forward(-s,!0)):n?this.setFocalOffset(this._focalOffsetEnd.x+a,this._focalOffsetEnd.y+s,this._focalOffsetEnd.z,!0):this.truck(a,s,!0)}else if(i(this._camera)){const r=this._camera,o=e*(r.right-r.left)/r.zoom/this._elementRect.width,i=t*(r.top-r.bottom)/r.zoom/this._elementRect.height;n?this.setFocalOffset(this._focalOffsetEnd.x+o,this._focalOffsetEnd.y+i,this._focalOffsetEnd.z,!0):this.truck(o,i,!0)}},this._rotateInternal=(e,t)=>{const n=a*this.azimuthRotateSpeed*e/this._elementRect.height,r=a*this.polarRotateSpeed*t/this._elementRect.height;this.rotate(n,r,!0)},this._dollyInternal=(e,t,n)=>{const r=Math.pow(.95,-e*this.dollySpeed),o=this._sphericalEnd.radius*r,i=this._sphericalEnd.radius,a=i*(e>=0?-1:1);this.dollyTo(o),this.infinityDolly&&(o<this.minDistance||this.maxDistance===this.minDistance)&&(this._camera.getWorldDirection(w),this._targetEnd.add(w.normalize().multiplyScalar(a)),this._target.add(w.normalize().multiplyScalar(a))),this.dollyToCursor&&(this._dollyControlAmount+=this._sphericalEnd.radius-i,this.infinityDolly&&(o<this.minDistance||this.maxDistance===this.minDistance)&&(this._dollyControlAmount-=a),this._dollyControlCoord.set(t,n))},this._zoomInternal=(e,t,n)=>{const r=Math.pow(.95,e*this.dollySpeed);this.zoomTo(this._zoom*r),this.dollyToCursor&&(this._dollyControlAmount=this._zoomEnd,this._dollyControlCoord.set(t,n))},"undefined"===typeof g&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=(new g.Quaternion).setFromUnitVectors(this._camera.up,C),this._yAxisUpSpaceInverse=m(this._yAxisUpSpace.clone()),this._state=r.NONE,this._domElement=t,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._target=new g.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new g.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=(new g.Spherical).setFromVector3(w.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._nearPlaneCorners=[new g.Vector3,new g.Vector3,new g.Vector3,new g.Vector3],this._updateNearPlaneCorners(),this._boundary=new g.Box3(new g.Vector3(-1/0,-1/0,-1/0),new g.Vector3(1/0,1/0,1/0)),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlAmount=0,this._dollyControlCoord=new g.Vector2,this.mouseButtons={left:r.ROTATE,middle:r.DOLLY,right:r.TRUCK,wheel:o(this._camera)?r.DOLLY:i(this._camera)?r.ZOOM:r.NONE,shiftLeft:r.NONE},this.touches={one:r.TOUCH_ROTATE,two:o(this._camera)?r.TOUCH_DOLLY_TRUCK:i(this._camera)?r.TOUCH_ZOOM_TRUCK:r.NONE,three:r.TOUCH_TRUCK},this._domElement){const e=new g.Vector2,t=new g.Vector2,n=new g.Vector2,o=e=>{if(!this._enabled)return;const t={pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY};switch(this._activePointers.push(t),e.button){case g.MOUSE.LEFT:this._state=e.shiftKey?this.mouseButtons.shiftLeft:this.mouseButtons.left;break;case g.MOUSE.MIDDLE:this._state=this.mouseButtons.middle;break;case g.MOUSE.RIGHT:this._state=this.mouseButtons.right}if("touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.addEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",c),_()},i=e=>{if(!this._enabled)return;const t={pointerId:0,clientX:e.clientX,clientY:e.clientY};switch(this._activePointers.push(t),e.button){case g.MOUSE.LEFT:this._state=e.shiftKey?this.mouseButtons.shiftLeft:this.mouseButtons.left;break;case g.MOUSE.MIDDLE:this._state=this.mouseButtons.middle;break;case g.MOUSE.RIGHT:this._state=this.mouseButtons.right}this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.addEventListener("mousemove",l),this._domElement.ownerDocument.addEventListener("mouseup",d),_()},a=e=>{if(this._enabled){switch(e.preventDefault(),Array.prototype.forEach.call(e.changedTouches,(e=>{const t={pointerId:e.identifier,clientX:e.clientX,clientY:e.clientY};this._activePointers.push(t)})),this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",p),this._domElement.ownerDocument.addEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.addEventListener("touchend",p),_()}},s=e=>{e.cancelable&&e.preventDefault();const t=e.pointerId,n=this._findPointerById(t);n&&(n.clientX=e.clientX,n.clientY=e.clientY,x())},l=e=>{const t=this._findPointerById(0);t&&(t.clientX=e.clientX,t.clientY=e.clientY,x())},u=e=>{e.cancelable&&e.preventDefault(),Array.prototype.forEach.call(e.changedTouches,(e=>{const t=e.identifier,n=this._findPointerById(t);n&&(n.clientX=e.clientX,n.clientY=e.clientY)})),x()},c=e=>{const t=e.pointerId,n=this._findPointerById(t);if(n&&this._activePointers.splice(this._activePointers.indexOf(n),1),"touch"===e.pointerType)switch(this._activePointers.length){case 0:this._state=r.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=r.NONE;C()},d=()=>{const e=this._findPointerById(0);e&&this._activePointers.splice(this._activePointers.indexOf(e),1),this._state=r.NONE,C()},p=e=>{switch(Array.prototype.forEach.call(e.changedTouches,(e=>{const t=e.identifier,n=this._findPointerById(t);n&&this._activePointers.splice(this._activePointers.indexOf(n),1)})),this._activePointers.length){case 0:this._state=r.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}C()};let f=-1;const m=e=>{if(!this._enabled||this.mouseButtons.wheel===r.NONE)return;if(e.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===r.ROTATE||this.mouseButtons.wheel===r.TRUCK){const e=performance.now();f-e<1e3&&this._getClientRect(this._elementRect),f=e}const t=b?-1:-3,n=1===e.deltaMode?e.deltaY/t:e.deltaY/(10*t),o=this.dollyToCursor?(e.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,i=this.dollyToCursor?(e.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case r.ROTATE:this._rotateInternal(e.deltaX,e.deltaY);break;case r.TRUCK:this._truckInternal(e.deltaX,e.deltaY,!1);break;case r.OFFSET:this._truckInternal(e.deltaX,e.deltaY,!0);break;case r.DOLLY:this._dollyInternal(-n,o,i);break;case r.ZOOM:this._zoomInternal(-n,o,i)}this.dispatchEvent({type:"control"})},v=e=>{this._enabled&&e.preventDefault()},_=()=>{if(!this._enabled)return;h(this._activePointers,O),this._getClientRect(this._elementRect),e.copy(O),t.copy(O);if(this._activePointers.length>=2){const e=O.x-this._activePointers[1].clientX,r=O.y-this._activePointers[1].clientY,o=Math.sqrt(e*e+r*r);n.set(0,o);const i=.5*(this._activePointers[0].clientX+this._activePointers[1].clientX),a=.5*(this._activePointers[0].clientY+this._activePointers[1].clientY);t.set(i,a)}this.dispatchEvent({type:"controlstart"})},x=()=>{if(!this._enabled)return;h(this._activePointers,O);const o=t.x-O.x,i=t.y-O.y;switch(t.copy(O),this._state){case r.ROTATE:case r.TOUCH_ROTATE:this._rotateInternal(o,i);break;case r.DOLLY:case r.ZOOM:{const t=this.dollyToCursor?(e.x-this._elementRect.x)/this._elementRect.width*2-1:0,n=this.dollyToCursor?(e.y-this._elementRect.y)/this._elementRect.height*-2+1:0;this._state===r.DOLLY?this._dollyInternal(i*E,t,n):this._zoomInternal(i*E,t,n);break}case r.TOUCH_DOLLY:case r.TOUCH_ZOOM:case r.TOUCH_DOLLY_TRUCK:case r.TOUCH_ZOOM_TRUCK:case r.TOUCH_DOLLY_OFFSET:case r.TOUCH_ZOOM_OFFSET:{const e=O.x-this._activePointers[1].clientX,a=O.y-this._activePointers[1].clientY,s=Math.sqrt(e*e+a*a),l=n.y-s;n.set(0,s);const u=this.dollyToCursor?(t.x-this._elementRect.x)/this._elementRect.width*2-1:0,c=this.dollyToCursor?(t.y-this._elementRect.y)/this._elementRect.height*-2+1:0;this._state===r.TOUCH_DOLLY||this._state===r.TOUCH_DOLLY_TRUCK||this._state===r.TOUCH_DOLLY_OFFSET?this._dollyInternal(l*E,u,c):this._zoomInternal(l*E,u,c),this._state===r.TOUCH_DOLLY_TRUCK||this._state===r.TOUCH_ZOOM_TRUCK?this._truckInternal(o,i,!1):this._state!==r.TOUCH_DOLLY_OFFSET&&this._state!==r.TOUCH_ZOOM_OFFSET||this._truckInternal(o,i,!0);break}case r.TRUCK:case r.TOUCH_TRUCK:this._truckInternal(o,i,!1);break;case r.OFFSET:case r.TOUCH_OFFSET:this._truckInternal(o,i,!0)}this.dispatchEvent({type:"control"})},C=()=>{h(this._activePointers,O),t.copy(O),0===this._activePointers.length&&(this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",p),this.dispatchEvent({type:"controlend"}))};this._domElement.addEventListener("pointerdown",o),y&&this._domElement.addEventListener("mousedown",i),y&&this._domElement.addEventListener("touchstart",a),this._domElement.addEventListener("pointercancel",c),this._domElement.addEventListener("wheel",m,{passive:!1}),this._domElement.addEventListener("contextmenu",v),this._removeAllEventListeners=()=>{this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",i),this._domElement.removeEventListener("touchstart",a),this._domElement.removeEventListener("pointercancel",c),this._domElement.removeEventListener("wheel",m,{passive:!1}),this._domElement.removeEventListener("contextmenu",v),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.removeEventListener("touchend",p)},this.cancel=()=>{this._state!==r.NONE&&(this._state=r.NONE,this._activePointers.length=0,C())}}this.update(0)}static install(e){g=e.THREE,x=Object.freeze(new g.Vector3(0,0,0)),C=Object.freeze(new g.Vector3(0,1,0)),T=Object.freeze(new g.Vector3(0,0,1)),O=new g.Vector2,w=new g.Vector3,R=new g.Vector3,S=new g.Vector3,P=new g.Vector3,I=new g.Vector3,k=new g.Vector3,D=new g.Spherical,F=new g.Spherical,A=new g.Box3,M=new g.Box3,L=new g.Sphere,U=new g.Quaternion,z=new g.Quaternion,N=new g.Matrix4,B=new g.Raycaster}static get ACTION(){return _}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="")}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){const r=g.MathUtils.clamp(e,this.minAzimuthAngle,this.maxAzimuthAngle),o=g.MathUtils.clamp(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=o,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const i=!n||u(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&u(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(i)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){const n=this._sphericalEnd.radius,r=g.MathUtils.clamp(e,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){const e=this._collisionTest(),t=u(e,this._spherical.radius);if(!(n>r)&&t)return Promise.resolve();this._sphericalEnd.radius=Math.min(r,e)}else this._sphericalEnd.radius=r;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const o=!t||u(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(o)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._zoomEnd=g.MathUtils.clamp(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||u(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),P.setFromMatrixColumn(this._camera.matrix,0),I.setFromMatrixColumn(this._camera.matrix,1),P.multiplyScalar(e),I.multiplyScalar(-t);const r=w.copy(P).add(I),o=R.copy(this._targetEnd).add(r);return this.moveTo(o.x,o.y,o.z,n)}forward(e,t=!1){w.setFromMatrixColumn(this._camera.matrix,0),w.crossVectors(this._camera.up,w),w.multiplyScalar(e);const n=R.copy(this._targetEnd).add(w);return this.moveTo(n.x,n.y,n.z,t)}moveTo(e,t,n,r=!1){const o=w.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,o,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const i=!r||u(this._target.x,this._targetEnd.x,this.restThreshold)&&u(this._target.y,this._targetEnd.y,this.restThreshold)&&u(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}fitToBox(e,t,{paddingLeft:n=0,paddingRight:r=0,paddingBottom:a=0,paddingTop:l=0}={}){const d=[],p=e.isBox3?A.copy(e):A.setFromObject(e);p.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const h=c(this._sphericalEnd.theta,s),f=c(this._sphericalEnd.phi,s);d.push(this.rotateTo(h,f,t));const m=w.setFromSpherical(this._sphericalEnd).normalize(),v=U.setFromUnitVectors(m,T);u(Math.abs(m.y),1)&&v.multiply(z.setFromAxisAngle(C,h));const b=M.makeEmpty();R.copy(p.min).applyQuaternion(v),b.expandByPoint(R),R.copy(p.min).setX(p.max.x).applyQuaternion(v),b.expandByPoint(R),R.copy(p.min).setY(p.max.y).applyQuaternion(v),b.expandByPoint(R),R.copy(p.max).setZ(p.min.z).applyQuaternion(v),b.expandByPoint(R),R.copy(p.min).setZ(p.max.z).applyQuaternion(v),b.expandByPoint(R),R.copy(p.max).setY(p.min.y).applyQuaternion(v),b.expandByPoint(R),R.copy(p.max).setX(p.min.x).applyQuaternion(v),b.expandByPoint(R),R.copy(p.max).applyQuaternion(v),b.expandByPoint(R),v.setFromUnitVectors(T,m),b.min.x-=n,b.min.y-=a,b.max.x+=r,b.max.y+=l;const y=b.getSize(w),_=b.getCenter(R).applyQuaternion(v);if(o(this._camera)){const e=this.getDistanceToFitBox(y.x,y.y,y.z);d.push(this.moveTo(_.x,_.y,_.z,t)),d.push(this.dollyTo(e,t)),d.push(this.setFocalOffset(0,0,0,t))}else if(i(this._camera)){const e=this._camera,n=e.right-e.left,r=e.top-e.bottom,o=Math.min(n/y.x,r/y.y);d.push(this.moveTo(_.x,_.y,_.z,t)),d.push(this.zoomTo(o,t)),d.push(this.setFocalOffset(0,0,0,t))}return Promise.all(d)}fitTo(e,t,n={}){return console.warn("camera-controls: fitTo() has been renamed to fitToBox()"),this.fitToBox(e,t,n)}fitToSphere(e,t){const n=[],r=e instanceof g.Sphere?L.copy(e):function(e,t){const n=t,r=n.center;e.traverse((e=>{e.isMesh&&A.expandByObject(e)})),A.getCenter(r);let o=0;return e.traverse((e=>{if(!e.isMesh)return;const t=e,n=t.geometry.clone();if(n.applyMatrix4(t.matrixWorld),n.isBufferGeometry){const e=n.attributes.position;for(let t=0,n=e.count;t<n;t++)w.fromBufferAttribute(e,t),o=Math.max(o,r.distanceToSquared(w))}else{const e=n.attributes.position,t=new g.Vector3;for(let n=0,i=e.count;n<i;n++)t.fromBufferAttribute(e,n),o=Math.max(o,r.distanceToSquared(t))}})),n.radius=Math.sqrt(o),n}(e,L);if(n.push(this.moveTo(r.center.x,r.center.y,r.center.z,t)),o(this._camera)){const e=this.getDistanceToFitSphere(r.radius);n.push(this.dollyTo(e,t))}else if(i(this._camera)){const e=this._camera.right-this._camera.left,o=this._camera.top-this._camera.bottom,i=2*r.radius,a=Math.min(e/i,o/i);n.push(this.zoomTo(a,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,r,o,i,a=!1){const s=R.set(r,o,i),l=w.set(e,t,n);this._targetEnd.copy(s),this._sphericalEnd.setFromVector3(l.sub(s).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const c=!a||u(this._target.x,this._targetEnd.x,this.restThreshold)&&u(this._target.y,this._targetEnd.y,this.restThreshold)&&u(this._target.z,this._targetEnd.z,this.restThreshold)&&u(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&u(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&u(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(c)}lerpLookAt(e,t,n,r,o,i,a,s,l,c,d,p,h,f=!1){const m=w.set(r,o,i),v=R.set(e,t,n);D.setFromVector3(v.sub(m).applyQuaternion(this._yAxisUpSpace));const b=S.set(c,d,p),y=R.set(a,s,l);F.setFromVector3(y.sub(b).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(m.lerp(b,h));const _=F.theta-D.theta,E=F.phi-D.phi,g=F.radius-D.radius;this._sphericalEnd.set(D.radius+g*h,D.phi+E*h,D.theta+_*h),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const x=!f||u(this._target.x,this._targetEnd.x,this.restThreshold)&&u(this._target.y,this._targetEnd.y,this.restThreshold)&&u(this._target.z,this._targetEnd.z,this.restThreshold)&&u(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&u(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&u(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(x)}setPosition(e,t,n,r=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n,r=!1){const o=this.getPosition(w);return this.setLookAt(o.x,o.y,o.z,e,t,n,r)}setFocalOffset(e,t,n,r=!1){this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const o=!r||u(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&u(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&u(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}setOrbitPoint(e,t,n){P.setFromMatrixColumn(this._camera.matrixWorldInverse,0),I.setFromMatrixColumn(this._camera.matrixWorldInverse,1),k.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=w.set(e,t,n),o=r.distanceTo(this._camera.position),i=r.sub(this._camera.position);P.multiplyScalar(i.x),I.multiplyScalar(i.y),k.multiplyScalar(i.z),w.copy(P).add(I).add(k),w.z=w.z+o,this.dollyTo(o,!1),this.setFocalOffset(-w.x,w.y,-w.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){null!==e?(this._viewport=this._viewport||new g.Vector4,"number"===typeof e?this._viewport.set(e,t,n,r):this._viewport.copy(e)):this._viewport=null}getDistanceToFitBox(e,t,n){if(f(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const r=e/t,o=this._camera.getEffectiveFOV()*g.MathUtils.DEG2RAD,i=this._camera.aspect;return.5*(r<i?t:e/i)/Math.tan(.5*o)+.5*n}getDistanceToFit(e,t,n){return console.warn("camera-controls: getDistanceToFit() has been renamed to getDistanceToFitBox()"),this.getDistanceToFitBox(e,t,n)}getDistanceToFitSphere(e){if(f(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*g.MathUtils.DEG2RAD,n=2*Math.atan(Math.tan(.5*t)*this._camera.aspect),r=1<this._camera.aspect?t:n;return e/Math.sin(.5*r)}getTarget(e){return(e&&e.isVector3?e:new g.Vector3).copy(this._targetEnd)}getPosition(e){return(e&&e.isVector3?e:new g.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(e){return(e&&e.isVector3?e:new g.Vector3).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%a,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=a),this._spherical.theta+=a*Math.round((this._sphericalEnd.theta-this._spherical.theta)/a)}reset(e=!1){const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._target0.copy(this._target),this._position0.copy(this._camera.position),this._zoom0=this._zoom}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,C),m(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))}update(e){const t=this._state===r.NONE?this.dampingFactor:this.draggingDampingFactor,n=Math.min(t*e*60,1),a=this._sphericalEnd.theta-this._spherical.theta,s=this._sphericalEnd.phi-this._spherical.phi,u=this._sphericalEnd.radius-this._spherical.radius,c=w.subVectors(this._targetEnd,this._target),d=R.subVectors(this._focalOffsetEnd,this._focalOffset);if(l(a)&&l(s)&&l(u)&&l(c.x)&&l(c.y)&&l(c.z)&&l(d.x)&&l(d.y)&&l(d.z)?(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)):(this._spherical.set(this._spherical.radius+u*n,this._spherical.phi+s*n,this._spherical.theta+a*n),this._target.add(c.multiplyScalar(n)),this._focalOffset.add(d.multiplyScalar(n)),this._needsUpdate=!0),0!==this._dollyControlAmount){if(o(this._camera)){const e=this._camera,t=w.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),n=R.copy(t).cross(e.up).normalize();0===n.lengthSq()&&(n.x=1);const r=S.crossVectors(n,t),o=this._sphericalEnd.radius*Math.tan(e.getEffectiveFOV()*g.MathUtils.DEG2RAD*.5),i=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,a=w.copy(this._targetEnd).add(n.multiplyScalar(this._dollyControlCoord.x*o*e.aspect)).add(r.multiplyScalar(this._dollyControlCoord.y*o));this._targetEnd.lerp(a,i),this._target.copy(this._targetEnd)}else if(i(this._camera)){const e=this._camera,t=w.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(e.near+e.far)/(e.near-e.far)).unproject(e),n=R.set(0,0,-1).applyQuaternion(e.quaternion),r=n.dot(e.up),o=l(r)?-t.dot(e.up):-t.dot(e.up)/r,i=S.copy(t).add(n.multiplyScalar(o));this._targetEnd.lerp(i,1-e.zoom/this._dollyControlAmount),this._target.copy(this._targetEnd)}this._dollyControlAmount=0}const p=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,p),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target);(!l(this._focalOffset.x)||!l(this._focalOffset.y)||!l(this._focalOffset.z))&&(this._camera.updateMatrix(),P.setFromMatrixColumn(this._camera.matrix,0),I.setFromMatrixColumn(this._camera.matrix,1),k.setFromMatrixColumn(this._camera.matrix,2),P.multiplyScalar(this._focalOffset.x),I.multiplyScalar(-this._focalOffset.y),k.multiplyScalar(this._focalOffset.z),w.copy(P).add(I).add(k),this._camera.position.add(w)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),w.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const h=this._zoomEnd-this._zoom;this._zoom+=h*n,this._camera.zoom!==this._zoom&&(l(h)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const f=this._needsUpdate;return f&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):f?(this.dispatchEvent({type:"update"}),l(a,this.restThreshold)&&l(s,this.restThreshold)&&l(u,this.restThreshold)&&l(c.x,this.restThreshold)&&l(c.y,this.restThreshold)&&l(c.z,this.restThreshold)&&l(d.x,this.restThreshold)&&l(d.y,this.restThreshold)&&l(d.z,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!f&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=f,this._needsUpdate=!1,f}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:d(this.maxDistance),minZoom:this.minZoom,maxZoom:d(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:d(this.maxPolarAngle),minAzimuthAngle:d(this.minAzimuthAngle),maxAzimuthAngle:d(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:w.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e),r=w.fromArray(n.position);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=p(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=p(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=p(n.maxPolarAngle),this.minAzimuthAngle=p(n.minAzimuthAngle),this.maxAzimuthAngle=p(n.maxAzimuthAngle),this.dampingFactor=n.dampingFactor,this.draggingDampingFactor=n.draggingDampingFactor,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),D.setFromVector3(r.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(D.theta,D.phi,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}dispose(){this._removeAllEventListeners()}_findPointerById(e){let t=null;return this._activePointers.some((n=>n.pointerId===e&&(t=n,!0))),t}_encloseToBoundary(e,t,n){const r=t.lengthSq();if(0===r)return e;const o=R.copy(t).add(e),i=this._boundary.clampPoint(o,S).sub(o),a=i.lengthSq();if(0===a)return e.add(t);if(a===r)return e;if(0===n)return e.add(t).add(i);{const r=1+n*a/t.dot(i);return e.add(R.copy(t).multiplyScalar(r)).add(i.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(o(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*g.MathUtils.DEG2RAD,r=Math.tan(.5*n)*t,o=r*e.aspect;this._nearPlaneCorners[0].set(-o,-r,0),this._nearPlaneCorners[1].set(o,-r,0),this._nearPlaneCorners[2].set(o,r,0),this._nearPlaneCorners[3].set(-o,r,0)}else if(i(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,o=e.top*t,i=e.bottom*t;this._nearPlaneCorners[0].set(n,o,0),this._nearPlaneCorners[1].set(r,o,0),this._nearPlaneCorners[2].set(r,i,0),this._nearPlaneCorners[3].set(n,i,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1))return e;if(f(this._camera,"_collisionTest"))return e;const t=w.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);N.lookAt(x,t,this._camera.up);for(let n=0;n<4;n++){const r=R.copy(this._nearPlaneCorners[n]);r.applyMatrix4(N);const o=S.addVectors(this._target,r);B.set(o,t),B.far=this._spherical.radius+1;const i=B.intersectObjects(this.colliderMeshes);0!==i.length&&i[0].distance<e&&(e=i[0].distance)}return e}_getClientRect(e){const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((e=>{const t=()=>{this.removeEventListener("rest",t),e()};this.addEventListener("rest",t)})))}_removeAllEventListeners(){}}},1289:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(655),o=n(7294),i=function(e){void 0===e&&(e={});var t=(0,o.useState)(e),n=t[0],r=t[1];return[n,(0,o.useCallback)((function(e){r((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[])]};function a(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}var s,l=(s="audio",function(e){var t,n;n=o.isValidElement(e)?(t=e).props:e;var l=i({buffered:[],time:0,duration:0,paused:!0,muted:!1,volume:1,playing:!1}),u=l[0],c=l[1],d=(0,o.useRef)(null),p=function(e,t){return function(n){try{t&&t(n)}finally{e&&e(n)}}},h=function(){return c({paused:!1})},f=function(){return c({playing:!0})},m=function(){return c({playing:!1})},v=function(){return c({paused:!0,playing:!1})},b=function(){var e=d.current;e&&c({muted:e.muted,volume:e.volume})},y=function(){var e=d.current;if(e){var t=e.duration,n=e.buffered;c({duration:t,buffered:a(n)})}},_=function(){var e=d.current;e&&c({time:e.currentTime})},E=function(){var e=d.current;e&&c({buffered:a(e.buffered)})};t=t?o.cloneElement(t,(0,r.pi)((0,r.pi)({controls:!1},n),{ref:d,onPlay:p(n.onPlay,h),onPlaying:p(n.onPlaying,f),onWaiting:p(n.onWaiting,m),onPause:p(n.onPause,v),onVolumeChange:p(n.onVolumeChange,b),onDurationChange:p(n.onDurationChange,y),onTimeUpdate:p(n.onTimeUpdate,_),onProgress:p(n.onProgress,E)})):o.createElement(s,(0,r.pi)((0,r.pi)({controls:!1},n),{ref:d,onPlay:p(n.onPlay,h),onPlaying:p(n.onPlaying,f),onWaiting:p(n.onWaiting,m),onPause:p(n.onPause,v),onVolumeChange:p(n.onVolumeChange,b),onDurationChange:p(n.onDurationChange,y),onTimeUpdate:p(n.onTimeUpdate,_),onProgress:p(n.onProgress,E)}));var g=!1,x={play:function(){var e=d.current;if(e&&!g){var t=e.play();if("object"===typeof t){g=!0;var n=function(){g=!1};t.then(n,n)}return t}},pause:function(){var e=d.current;if(e&&!g)return e.pause()},seek:function(e){var t=d.current;t&&void 0!==u.duration&&(e=Math.min(u.duration,Math.max(0,e)),t.currentTime=e)},volume:function(e){var t=d.current;t&&(e=Math.min(1,Math.max(0,e)),t.volume=e,c({volume:e}))},mute:function(){var e=d.current;e&&(e.muted=!0)},unmute:function(){var e=d.current;e&&(e.muted=!1)}};return(0,o.useEffect)((function(){var e=d.current;e&&(c({volume:e.volume,muted:e.muted,paused:e.paused}),n.autoPlay&&e.paused&&x.play())}),[n.src]),[t,u,x,d]})},7878:function(e,t){t.Z=function(e,t){void 0===t&&(t={direction:"both"});var n=t.direction,r={scrollTop:0,scrollLeft:0,mouseX:0,mouseY:0},o=function(t){if(e.current){var o=t.clientX-r.mouseX,i=t.clientY-r.mouseY;"horizontal"!==n&&(e.current.scrollTop=r.scrollTop-i),"vertical"!==n&&(e.current.scrollLeft=r.scrollLeft-o)}},i=function t(){e.current&&(e.current.style.cursor="grab"),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t)};return{onMouseDown:function(t){e.current&&(r={scrollLeft:e.current.scrollLeft,scrollTop:e.current.scrollTop,mouseX:t.clientX,mouseY:t.clientY},e.current.style.cursor="grabbing",e.current.style.userSelect="none",document.addEventListener("mousemove",o),document.addEventListener("mouseup",i))}}}},7462:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},6727:function(e,t,n){n.d(t,{Vq:function(){return be},uT:function(){return Mt}});var r=n(7294),o=n(3935);function i(){let e=[],t=[],n={enqueue(e){t.push(e)},requestAnimationFrame(...e){let t=requestAnimationFrame(...e);n.add((()=>cancelAnimationFrame(t)))},nextFrame(...e){n.requestAnimationFrame((()=>{n.requestAnimationFrame(...e)}))},setTimeout(...e){let t=setTimeout(...e);n.add((()=>clearTimeout(t)))},add(t){e.push(t)},dispose(){for(let t of e.splice(0))t()},async workQueue(){for(let e of t.splice(0))await e()}};return n}function a(){let[e]=(0,r.useState)(i);return(0,r.useEffect)((()=>()=>e.dispose()),[e]),e}var s="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,l={serverHandoffComplete:!1};function u(){let[e,t]=(0,r.useState)(l.serverHandoffComplete);return(0,r.useEffect)((()=>{!0!==e&&t(!0)}),[e]),(0,r.useEffect)((()=>{!1===l.serverHandoffComplete&&(l.serverHandoffComplete=!0)}),[]),e}var c=0;function d(){return++c}function p(){let e=u(),[t,n]=(0,r.useState)(e?d:null);return s((()=>{null===t&&n(d())}),[t]),null!=t?""+t:void 0}function h(e){let t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t}function f(e,t){let[n,o]=(0,r.useState)(e),i=h(e);return s((()=>o(i.current)),[i,o,...t]),n}function m(...e){let t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),(0,r.useCallback)((e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)}),[t])}function v(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,v),r}function b({props:e,slot:t,defaultTag:n,features:r,visible:o=!0,name:i}){if(o)return y(e,t,n,i);let a=null!=r?r:0;if(2&a){let{static:r=!1,...o}=e;if(r)return y(o,t,n,i)}if(1&a){let{unmount:r=!0,...o}=e;return v(r?0:1,{0:()=>null,1:()=>y({...o,hidden:!0,style:{display:"none"}},t,n,i)})}return y(e,t,n,i)}function y(e,t={},n,o){let{as:i=n,children:a,refName:s="ref",...l}=E(e,["unmount","static"]),u=void 0!==e.ref?{[s]:e.ref}:{},c="function"==typeof a?a(t):a;if(l.className&&"function"==typeof l.className&&(l.className=l.className(t)),i===r.Fragment&&Object.keys(l).length>0){if(!(0,r.isValidElement)(c)||Array.isArray(c)&&c.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${o} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"));return(0,r.cloneElement)(c,Object.assign({},function(e,t,n){let r=Object.assign({},e);for(let o of n)void 0!==e[o]&&void 0!==t[o]&&Object.assign(r,{[o](n){n.defaultPrevented||e[o](n),n.defaultPrevented||t[o](n)}});return r}(function(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}(E(l,["ref"])),c.props,["onClick"]),u))}return(0,r.createElement)(i,Object.assign({},E(l,["ref"]),i!==r.Fragment&&u),c)}function _(e){var t;return Object.assign((0,r.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function E(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function g(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),o=null!=r?r:-1,i=(()=>{switch(e.focus){case 0:return n.findIndex((e=>!t.resolveDisabled(e)));case 1:{let e=n.slice().reverse().findIndex(((e,n,r)=>!(-1!==o&&r.length-n-1>=o)&&!t.resolveDisabled(e)));return-1===e?e:n.length-1-e}case 2:return n.findIndex(((e,n)=>!(n<=o)&&!t.resolveDisabled(e)));case 3:{let e=n.slice().reverse().findIndex((e=>!t.resolveDisabled(e)));return-1===e?e:n.length-1-e}case 4:return n.findIndex((n=>t.resolveId(n)===e.id));case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}})();return-1===i?r:i}function x(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}function C(e,t,n){let o=(0,r.useRef)(t);o.current=t,(0,r.useEffect)((()=>{function t(e){o.current.call(window,e)}return window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)}),[e,n])}var T=(0,r.createContext)(null);function O(){return(0,r.useContext)(T)}function w({value:e,children:t}){return r.createElement(T.Provider,{value:e},t)}function R(e){var t;if(e.type)return e.type;let n=null!=(t=e.as)?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function S(e,t){let[n,o]=(0,r.useState)((()=>R(e)));return s((()=>{o(R(e))}),[e.type,e.as]),s((()=>{n||!t.current||t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&o("button")}),[n,t]),n}function P({container:e,accept:t,walk:n,enabled:o=!0}){let i=(0,r.useRef)(t),a=(0,r.useRef)(n);(0,r.useEffect)((()=>{i.current=t,a.current=n}),[t,n]),s((()=>{if(!e||!o)return;let t=i.current,n=a.current,r=Object.assign((e=>t(e)),{acceptNode:t}),s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,r,!1);for(;s.nextNode();)n(s.currentNode)}),[e,o,i,a])}T.displayName="OpenClosedContext";var I={1:e=>e.disabled||1===e.comboboxState?e:{...e,activeOptionIndex:null,comboboxState:1},0:e=>e.disabled||0===e.comboboxState?e:{...e,comboboxState:0},2:(e,t)=>e.disabled===t.disabled?e:{...e,disabled:t.disabled},3(e,t){if(e.disabled||e.optionsRef.current&&!e.optionsPropsRef.current.static&&1===e.comboboxState)return e;let n=g(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return e.activeOptionIndex===n?e:{...e,activeOptionIndex:n}},4:(e,t)=>{var n;let r=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,o=Array.from(null==(n=e.optionsRef.current)?void 0:n.querySelectorAll('[id^="headlessui-combobox-option-"]')).reduce(((e,t,n)=>Object.assign(e,{[t.id]:n})),{}),i=[...e.options,{id:t.id,dataRef:t.dataRef}].sort(((e,t)=>o[e.id]-o[t.id]));return{...e,options:i,activeOptionIndex:null===r?null:i.indexOf(r)}},5:(e,t)=>{let n=e.options.slice(),r=null!==e.activeOptionIndex?n[e.activeOptionIndex]:null,o=n.findIndex((e=>e.id===t.id));return-1!==o&&n.splice(o,1),{...e,options:n,activeOptionIndex:o===e.activeOptionIndex||null===r?null:n.indexOf(r)}}},k=(0,r.createContext)(null);function D(e){let t=(0,r.useContext)(k);if(null===t){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,D),t}return t}k.displayName="ComboboxContext";var F=(0,r.createContext)(null);function A(){let e=(0,r.useContext)(F);if(null===e){let e=new Error("ComboboxActions is missing a parent <Combobox /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(e,A),e}return e}function M(e,t){return v(t.type,I,e,t)}F.displayName="ComboboxActions";var L=r.Fragment,U=_((function(e,t){let{value:n,onChange:o,disabled:i=!1,...a}=e,l=(0,r.useRef)({value:n,onChange:o}),u=(0,r.useRef)({static:!1,hold:!1}),c=(0,r.useRef)({displayValue:void 0}),d=(0,r.useReducer)(M,{comboboxState:1,comboboxPropsRef:l,optionsPropsRef:u,inputPropsRef:c,labelRef:(0,r.createRef)(),inputRef:(0,r.createRef)(),buttonRef:(0,r.createRef)(),optionsRef:(0,r.createRef)(),disabled:i,options:[],activeOptionIndex:null}),[{comboboxState:p,options:h,activeOptionIndex:f,optionsRef:m,inputRef:y,buttonRef:_},E]=d;s((()=>{l.current.value=n}),[n,l]),s((()=>{l.current.onChange=o}),[o,l]),s((()=>E({type:2,disabled:i})),[i]),C("mousedown",(e=>{var t,n,r;let o=e.target;0===p&&((null==(t=_.current)?void 0:t.contains(o))||(null==(n=y.current)?void 0:n.contains(o))||(null==(r=m.current)?void 0:r.contains(o))||E({type:1}))}));let g=null===f?null:h[f].dataRef.current.value,x=(0,r.useMemo)((()=>({open:0===p,disabled:i,activeIndex:f,activeOption:g})),[p,i,h,f]),T=(0,r.useCallback)((()=>{if(!y.current||void 0===n)return;let e=c.current.displayValue;"function"==typeof e?y.current.value=e(n):"string"==typeof n&&(y.current.value=n)}),[n,y,c]),O=(0,r.useCallback)((e=>{let t=h.find((t=>t.id===e));if(!t)return;let{dataRef:n}=t;l.current.onChange(n.current.value),T()}),[h,l,y]),R=(0,r.useCallback)((()=>{if(null!==f){let{dataRef:e}=h[f];l.current.onChange(e.current.value),T()}}),[f,h,l,y]),S=(0,r.useMemo)((()=>({selectOption:O,selectActiveOption:R})),[O,R]);return s((()=>{1===p&&T()}),[T,p]),s(T,[T]),r.createElement(F.Provider,{value:S},r.createElement(k.Provider,{value:d},r.createElement(w,{value:v(p,{0:0,1:1})},b({props:null===t?a:{...a,ref:t},slot:x,defaultTag:L,name:"Combobox"}))))})),z=_((function(e,t){var n,o;let{value:i,onChange:l,displayValue:u,...c}=e,[d,y]=D("Combobox.Input"),_=A(),E=m(d.inputRef,t),g=d.inputPropsRef,x=`headlessui-combobox-input-${p()}`,C=a(),T=h(l);s((()=>{g.current.displayValue=u}),[u,g]);let O=(0,r.useCallback)((e=>{switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation(),_.selectActiveOption(),y({type:1});break;case"ArrowDown":return e.preventDefault(),e.stopPropagation(),v(d.comboboxState,{0:()=>y({type:3,focus:2}),1:()=>{y({type:0}),C.nextFrame((()=>{d.comboboxPropsRef.current.value||y({type:3,focus:0})}))}});case"ArrowUp":return e.preventDefault(),e.stopPropagation(),v(d.comboboxState,{0:()=>y({type:3,focus:1}),1:()=>{y({type:0}),C.nextFrame((()=>{d.comboboxPropsRef.current.value||y({type:3,focus:3})}))}});case"Home":case"PageUp":return e.preventDefault(),e.stopPropagation(),y({type:3,focus:0});case"End":case"PageDown":return e.preventDefault(),e.stopPropagation(),y({type:3,focus:3});case"Escape":return e.preventDefault(),d.optionsRef.current&&!d.optionsPropsRef.current.static&&e.stopPropagation(),y({type:1});case"Tab":_.selectActiveOption(),y({type:1})}}),[C,y,d,_]),w=(0,r.useCallback)((e=>{var t;y({type:0}),null==(t=T.current)||t.call(T,e)}),[y,T]),R=f((()=>{if(d.labelRef.current)return[d.labelRef.current.id].join(" ")}),[d.labelRef.current]),S=(0,r.useMemo)((()=>({open:0===d.comboboxState,disabled:d.disabled})),[d]);return b({props:{...c,...{ref:E,id:x,role:"combobox",type:"text","aria-controls":null==(n=d.optionsRef.current)?void 0:n.id,"aria-expanded":d.disabled?void 0:0===d.comboboxState,"aria-activedescendant":null===d.activeOptionIndex||null==(o=d.options[d.activeOptionIndex])?void 0:o.id,"aria-labelledby":R,disabled:d.disabled,onKeyDown:O,onChange:w}},slot:S,defaultTag:"input",name:"Combobox.Input"})})),N=_((function(e,t){var n;let[o,i]=D("Combobox.Button"),s=A(),l=m(o.buttonRef,t),u=`headlessui-combobox-button-${p()}`,c=a(),d=(0,r.useCallback)((e=>{switch(e.key){case"ArrowDown":return e.preventDefault(),e.stopPropagation(),1===o.comboboxState&&(i({type:0}),c.nextFrame((()=>{o.comboboxPropsRef.current.value||i({type:3,focus:0})}))),c.nextFrame((()=>{var e;return null==(e=o.inputRef.current)?void 0:e.focus({preventScroll:!0})}));case"ArrowUp":return e.preventDefault(),e.stopPropagation(),1===o.comboboxState&&(i({type:0}),c.nextFrame((()=>{o.comboboxPropsRef.current.value||i({type:3,focus:3})}))),c.nextFrame((()=>{var e;return null==(e=o.inputRef.current)?void 0:e.focus({preventScroll:!0})}));case"Escape":return e.preventDefault(),o.optionsRef.current&&!o.optionsPropsRef.current.static&&e.stopPropagation(),i({type:1}),c.nextFrame((()=>{var e;return null==(e=o.inputRef.current)?void 0:e.focus({preventScroll:!0})}))}}),[c,i,o,s]),h=(0,r.useCallback)((e=>{if(x(e.currentTarget))return e.preventDefault();0===o.comboboxState?i({type:1}):(e.preventDefault(),i({type:0})),c.nextFrame((()=>{var e;return null==(e=o.inputRef.current)?void 0:e.focus({preventScroll:!0})}))}),[i,c,o]),v=f((()=>{if(o.labelRef.current)return[o.labelRef.current.id,u].join(" ")}),[o.labelRef.current,u]),y=(0,r.useMemo)((()=>({open:0===o.comboboxState,disabled:o.disabled})),[o]);return b({props:{...e,...{ref:l,id:u,type:S(e,o.buttonRef),tabIndex:-1,"aria-haspopup":!0,"aria-controls":null==(n=o.optionsRef.current)?void 0:n.id,"aria-expanded":o.disabled?void 0:0===o.comboboxState,"aria-labelledby":v,disabled:o.disabled,onClick:h,onKeyDown:d}},slot:y,defaultTag:"button",name:"Combobox.Button"})}));var B=_((function(e,t){var n;let{hold:o=!1,...i}=e,[a]=D("Combobox.Options"),{optionsPropsRef:l}=a,u=m(a.optionsRef,t),c=`headlessui-combobox-options-${p()}`,d=O(),h=null!==d?0===d:0===a.comboboxState;s((()=>{var t;l.current.static=null!=(t=e.static)&&t}),[l,e.static]),s((()=>{l.current.hold=o}),[o,l]),P({container:a.optionsRef.current,enabled:0===a.comboboxState,accept:e=>"option"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let v=f((()=>{var e,t,n;return null!=(n=null==(e=a.labelRef.current)?void 0:e.id)?n:null==(t=a.buttonRef.current)?void 0:t.id}),[a.labelRef.current,a.buttonRef.current]),y=(0,r.useMemo)((()=>({open:0===a.comboboxState})),[a]);return b({props:{...i,...{"aria-activedescendant":null===a.activeOptionIndex||null==(n=a.options[a.activeOptionIndex])?void 0:n.id,"aria-labelledby":v,role:"listbox",id:c,ref:u}},slot:y,defaultTag:"ul",features:3,visible:h,name:"Combobox.Options"})}));Object.assign(U,{Input:z,Button:N,Label:function(e){let[t]=D("Combobox.Label"),n=`headlessui-combobox-label-${p()}`,o=(0,r.useCallback)((()=>{var e;return null==(e=t.inputRef.current)?void 0:e.focus({preventScroll:!0})}),[t.inputRef]),i=(0,r.useMemo)((()=>({open:0===t.comboboxState,disabled:t.disabled})),[t]);return b({props:{...e,...{ref:t.labelRef,id:n,onClick:o}},slot:i,defaultTag:"label",name:"Combobox.Label"})},Options:B,Option:function(e){let{disabled:t=!1,value:n,...o}=e,[a,l]=D("Combobox.Option"),u=A(),c=`headlessui-combobox-option-${p()}`,d=null!==a.activeOptionIndex&&a.options[a.activeOptionIndex].id===c,h=a.comboboxPropsRef.current.value===n,f=(0,r.useRef)({disabled:t,value:n});s((()=>{f.current.disabled=t}),[f,t]),s((()=>{f.current.value=n}),[f,n]),s((()=>{var e,t;f.current.textValue=null==(t=null==(e=document.getElementById(c))?void 0:e.textContent)?void 0:t.toLowerCase()}),[f,c]);let m=(0,r.useCallback)((()=>u.selectOption(c)),[u,c]);s((()=>(l({type:4,id:c,dataRef:f}),()=>l({type:5,id:c}))),[f,c]),s((()=>{0===a.comboboxState&&(!h||l({type:3,focus:4,id:c}))}),[a.comboboxState,h,c]),s((()=>{if(0!==a.comboboxState||!d)return;let e=i();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=document.getElementById(c))?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[c,d,a.comboboxState,a.activeOptionIndex]);let v=(0,r.useCallback)((e=>{if(t)return e.preventDefault();m(),l({type:1}),i().nextFrame((()=>{var e;return null==(e=a.inputRef.current)?void 0:e.focus({preventScroll:!0})}))}),[l,a.inputRef,t,m]),y=(0,r.useCallback)((()=>{if(t)return l({type:3,focus:5});l({type:3,focus:4,id:c})}),[t,c,l]),_=(0,r.useCallback)((()=>{t||d||l({type:3,focus:4,id:c})}),[t,d,c,l]),E=(0,r.useCallback)((()=>{t||!d||a.optionsPropsRef.current.hold||l({type:3,focus:5})}),[t,d,l,a.comboboxState,a.comboboxPropsRef]),g=(0,r.useMemo)((()=>({active:d,selected:h,disabled:t})),[d,h,t]);return b({props:{...o,id:c,role:"option",tabIndex:!0===t?void 0:-1,"aria-disabled":!0===t||void 0,"aria-selected":!0===h||void 0,disabled:void 0,onClick:v,onFocus:y,onPointerMove:_,onMouseMove:_,onPointerLeave:E,onMouseLeave:E},slot:g,defaultTag:"li",name:"Combobox.Option"})}});var V=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");function $(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(V))}function H(e,t=0){return e!==document.body&&v(t,{0:()=>e.matches(V),1(){let t=e;for(;null!==t;){if(t.matches(V))return!0;t=t.parentElement}return!1}})}function Y(e){null==e||e.focus({preventScroll:!0})}function K(e,t){let n,r=Array.isArray(e)?e.slice().sort(((e,t)=>{let n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING?-1:n&Node.DOCUMENT_POSITION_PRECEDING?1:0})):$(e),o=document.activeElement,i=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,r.indexOf(o))-1;if(4&t)return Math.max(0,r.indexOf(o))+1;if(8&t)return r.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),s=32&t?{preventScroll:!0}:{},l=0,u=r.length;do{if(l>=u||l+u<=0)return 0;let e=a+l;if(16&t)e=(e+u)%u;else{if(e<0)return 3;if(e>=u)return 1}n=r[e],null==n||n.focus(s),l+=i}while(n!==document.activeElement);return n.hasAttribute("tabindex")||n.setAttribute("tabindex","0"),2}function j(){let e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}function Q(e,t=30,{initialFocus:n,containers:o}={}){let i=(0,r.useRef)("undefined"!=typeof window?document.activeElement:null),a=(0,r.useRef)(null),s=j(),l=Boolean(16&t),u=Boolean(2&t);(0,r.useEffect)((()=>{!l||(i.current=document.activeElement)}),[l]),(0,r.useEffect)((()=>{if(l)return()=>{Y(i.current),i.current=null}}),[l]),(0,r.useEffect)((()=>{if(!u||!e.current)return;let t=document.activeElement;if(null==n?void 0:n.current){if((null==n?void 0:n.current)===t)return void(a.current=t)}else if(e.current.contains(t))return void(a.current=t);(null==n?void 0:n.current)?Y(n.current):0===K(e.current,1)&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=document.activeElement}),[e,n,u]),C("keydown",(n=>{!(4&t)||!e.current||"Tab"===n.key&&(n.preventDefault(),2===K(e.current,16|(n.shiftKey?2:4))&&(a.current=document.activeElement))})),C("focus",(n=>{if(!(8&t))return;let r=new Set(null==o?void 0:o.current);if(r.add(e),!r.size)return;let i=a.current;if(!i||!s.current)return;let l=n.target;l&&l instanceof HTMLElement?function(e,t){var n;for(let r of e)if(null==(n=r.current)?void 0:n.contains(t))return!0;return!1}(r,l)?(a.current=l,Y(l)):(n.preventDefault(),n.stopPropagation(),Y(i)):Y(a.current)}),!0)}var Z=new Set,W=new Map;function G(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function X(e){let t=W.get(e);!t||(null===t["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}var q=(0,r.createContext)(!1);function J(e){return r.createElement(q.Provider,{value:e.force},e.children)}function ee(){let e=(0,r.useContext)(q),t=(0,r.useContext)(oe),[n,o]=(0,r.useState)((()=>{if(!e&&null!==t||"undefined"==typeof window)return null;let n=document.getElementById("headlessui-portal-root");if(n)return n;let r=document.createElement("div");return r.setAttribute("id","headlessui-portal-root"),document.body.appendChild(r)}));return(0,r.useEffect)((()=>{null!==n&&(document.body.contains(n)||document.body.appendChild(n))}),[n]),(0,r.useEffect)((()=>{e||null!==t&&o(t.current)}),[t,o,e]),n}var te=r.Fragment;function ne(e){let t=e,n=ee(),[i]=(0,r.useState)((()=>"undefined"==typeof window?null:document.createElement("div"))),a=u();return s((()=>{if(n&&i)return n.appendChild(i),()=>{var e;!n||!i||(n.removeChild(i),n.childNodes.length<=0&&(null==(e=n.parentElement)||e.removeChild(n)))}}),[n,i]),a&&n&&i?(0,o.createPortal)(b({props:t,defaultTag:te,name:"Portal"}),i):null}var re=r.Fragment,oe=(0,r.createContext)(null);ne.Group=function(e){let{target:t,...n}=e;return r.createElement(oe.Provider,{value:t},b({props:n,defaultTag:re,name:"Popover.Group"}))};var ie=(0,r.createContext)(null);function ae(){let e=(0,r.useContext)(ie);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,ae),e}return e}function se(){let[e,t]=(0,r.useState)([]);return[e.length>0?e.join(" "):void 0,(0,r.useMemo)((()=>function(e){let n=(0,r.useCallback)((e=>(t((t=>[...t,e])),()=>t((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n})))),[]),o=(0,r.useMemo)((()=>({register:n,slot:e.slot,name:e.name,props:e.props})),[n,e.slot,e.name,e.props]);return r.createElement(ie.Provider,{value:o},e.children)}),[t])]}function le(e){let t=ae(),n=`headlessui-description-${p()}`;return s((()=>t.register(n)),[n,t.register]),b({props:{...e,...{...t.props,id:n}},slot:t.slot||{},defaultTag:"p",name:t.name||"Description"})}var ue=(0,r.createContext)((()=>{}));function ce({children:e,onUpdate:t,type:n,element:o}){let i=(0,r.useContext)(ue),a=(0,r.useCallback)(((...e)=>{null==t||t(...e),i(...e)}),[i,t]);return s((()=>(a(0,n,o),()=>a(1,n,o))),[a,n,o]),r.createElement(ue.Provider,{value:a},e)}ue.displayName="StackContext";var de={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},pe=(0,r.createContext)(null);function he(e){let t=(0,r.useContext)(pe);if(null===t){let t=new Error(`<${e} /> is missing a parent <${be.displayName} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,he),t}return t}function fe(e,t){return v(t.type,de,e,t)}pe.displayName="DialogContext";var me=_((function(e,t){let{open:n,onClose:o,initialFocus:i,...a}=e,[l,c]=(0,r.useState)(0),d=O();void 0===n&&null!==d&&(n=v(d,{0:!0,1:!1}));let h=(0,r.useRef)(new Set),f=(0,r.useRef)(null),y=m(f,t),_=e.hasOwnProperty("open")||null!==d,E=e.hasOwnProperty("onClose");if(!_&&!E)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!_)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!E)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if("boolean"!=typeof n)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${n}`);if("function"!=typeof o)throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${o}`);let g=n?0:1,x=null!==d?0===d:0===g,[T,w]=(0,r.useReducer)(fe,{titleId:null,descriptionId:null}),R=(0,r.useCallback)((()=>o(!1)),[o]),S=(0,r.useCallback)((e=>w({type:0,id:e})),[w]),P=u()&&0===g,I=l>1,k=null!==(0,r.useContext)(pe);Q(f,P?v(I?"parent":"leaf",{parent:16,leaf:30}):1,{initialFocus:i,containers:h}),function(e,t=!0){s((()=>{if(!t||!e.current)return;let n=e.current;Z.add(n);for(let e of W.keys())e.contains(n)&&(X(e),W.delete(e));return document.querySelectorAll("body > *").forEach((e=>{if(e instanceof HTMLElement){for(let t of Z)if(e.contains(t))return;1===Z.size&&(W.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),G(e))}})),()=>{if(Z.delete(n),Z.size>0)document.querySelectorAll("body > *").forEach((e=>{if(e instanceof HTMLElement&&!W.has(e)){for(let t of Z)if(e.contains(t))return;W.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),G(e)}}));else for(let e of W.keys())X(e),W.delete(e)}}),[t])}(f,!!I&&P),C("mousedown",(e=>{var t;let n=e.target;0===g&&(I||(null==(t=f.current)?void 0:t.contains(n))||R())})),C("keydown",(e=>{"Escape"===e.key&&0===g&&(I||(e.preventDefault(),e.stopPropagation(),R()))})),(0,r.useEffect)((()=>{if(0!==g||k)return;let e=document.documentElement.style.overflow,t=document.documentElement.style.paddingRight,n=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${n}px`,()=>{document.documentElement.style.overflow=e,document.documentElement.style.paddingRight=t}}),[g,k]),(0,r.useEffect)((()=>{if(0!==g||!f.current)return;let e=new IntersectionObserver((e=>{for(let t of e)0===t.boundingClientRect.x&&0===t.boundingClientRect.y&&0===t.boundingClientRect.width&&0===t.boundingClientRect.height&&R()}));return e.observe(f.current),()=>e.disconnect()}),[g,f,R]);let[D,F]=se(),A=`headlessui-dialog-${p()}`,M=(0,r.useMemo)((()=>[{dialogState:g,close:R,setTitleId:S},T]),[g,T,R,S]),L=(0,r.useMemo)((()=>({open:0===g})),[g]),U={ref:y,id:A,role:"dialog","aria-modal":0===g||void 0,"aria-labelledby":T.titleId,"aria-describedby":D,onClick(e){e.stopPropagation()}},z=a;return r.createElement(ce,{type:"Dialog",element:f,onUpdate:(0,r.useCallback)(((e,t,n)=>{"Dialog"===t&&v(e,{0(){h.current.add(n),c((e=>e+1))},1(){h.current.add(n),c((e=>e-1))}})}),[])},r.createElement(J,{force:!0},r.createElement(ne,null,r.createElement(pe.Provider,{value:M},r.createElement(ne.Group,{target:f},r.createElement(J,{force:!1},r.createElement(F,{slot:L,name:"Dialog.Description"},b({props:{...z,...U},slot:L,defaultTag:"div",features:3,visible:x,name:"Dialog"}))))))))})),ve=_((function(e,t){let[{dialogState:n,close:o}]=he("Dialog.Overlay");return b({props:{...e,ref:m(t),id:`headlessui-dialog-overlay-${p()}`,"aria-hidden":!0,onClick:(0,r.useCallback)((e=>{if(e.target===e.currentTarget){if(x(e.currentTarget))return e.preventDefault();e.preventDefault(),e.stopPropagation(),o()}}),[o])},slot:(0,r.useMemo)((()=>({open:0===n})),[n]),defaultTag:"div",name:"Dialog.Overlay"})}));var be=Object.assign(me,{Overlay:ve,Title:function(e){let[{dialogState:t,setTitleId:n}]=he("Dialog.Title"),o=`headlessui-dialog-title-${p()}`;(0,r.useEffect)((()=>(n(o),()=>n(null))),[o,n]);let i=(0,r.useMemo)((()=>({open:0===t})),[t]);return b({props:{...e,id:o},slot:i,defaultTag:"h2",name:"Dialog.Title"})},Description:le}),ye={0:e=>({...e,disclosureState:v(e.disclosureState,{0:1,1:0})}),1:e=>1===e.disclosureState?e:{...e,disclosureState:1},4:e=>!0===e.linkedPanel?e:{...e,linkedPanel:!0},5:e=>!1===e.linkedPanel?e:{...e,linkedPanel:!1},2:(e,t)=>e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId},3:(e,t)=>e.panelId===t.panelId?e:{...e,panelId:t.panelId}},_e=(0,r.createContext)(null);function Ee(e){let t=(0,r.useContext)(_e);if(null===t){let t=new Error(`<${e} /> is missing a parent <${we.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ee),t}return t}_e.displayName="DisclosureContext";var ge=(0,r.createContext)(null);function xe(e){let t=(0,r.useContext)(ge);if(null===t){let t=new Error(`<${e} /> is missing a parent <${we.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,xe),t}return t}ge.displayName="DisclosureAPIContext";var Ce=(0,r.createContext)(null);function Te(e,t){return v(t.type,ye,e,t)}Ce.displayName="DisclosurePanelContext";var Oe=r.Fragment;function we(e){let{defaultOpen:t=!1,...n}=e,o=`headlessui-disclosure-button-${p()}`,i=`headlessui-disclosure-panel-${p()}`,a=(0,r.useReducer)(Te,{disclosureState:t?0:1,linkedPanel:!1,buttonId:o,panelId:i}),[{disclosureState:s},l]=a;(0,r.useEffect)((()=>l({type:2,buttonId:o})),[o,l]),(0,r.useEffect)((()=>l({type:3,panelId:i})),[i,l]);let u=(0,r.useCallback)((e=>{l({type:1});let t=e?e instanceof HTMLElement?e:e.current instanceof HTMLElement?e.current:document.getElementById(o):document.getElementById(o);null==t||t.focus()}),[l,o]),c=(0,r.useMemo)((()=>({close:u})),[u]),d=(0,r.useMemo)((()=>({open:0===s,close:u})),[s,u]);return r.createElement(_e.Provider,{value:a},r.createElement(ge.Provider,{value:c},r.createElement(w,{value:v(s,{0:0,1:1})},b({props:n,slot:d,defaultTag:Oe,name:"Disclosure"}))))}var Re=_((function(e,t){let[n,o]=Ee("Disclosure.Button"),i=(0,r.useRef)(null),a=m(i,t),s=(0,r.useContext)(Ce),l=null!==s&&s===n.panelId,u=(0,r.useCallback)((e=>{var t;if(l){if(1===n.disclosureState)return;switch(e.key){case" ":case"Enter":e.preventDefault(),e.stopPropagation(),o({type:0}),null==(t=document.getElementById(n.buttonId))||t.focus()}}else switch(e.key){case" ":case"Enter":e.preventDefault(),e.stopPropagation(),o({type:0})}}),[o,l,n.disclosureState,n.buttonId]),c=(0,r.useCallback)((e=>{if(" "===e.key)e.preventDefault()}),[]),d=(0,r.useCallback)((t=>{var r;x(t.currentTarget)||e.disabled||(l?(o({type:0}),null==(r=document.getElementById(n.buttonId))||r.focus()):o({type:0}))}),[o,e.disabled,n.buttonId,l]),p=(0,r.useMemo)((()=>({open:0===n.disclosureState})),[n]),h=S(e,i);return b({props:{...e,...l?{ref:a,type:h,onKeyDown:u,onClick:d}:{ref:a,id:n.buttonId,type:h,"aria-expanded":e.disabled?void 0:0===n.disclosureState,"aria-controls":n.linkedPanel?n.panelId:void 0,onKeyDown:u,onKeyUp:c,onClick:d}},slot:p,defaultTag:"button",name:"Disclosure.Button"})})),Se=_((function(e,t){let[n,o]=Ee("Disclosure.Panel"),{close:i}=xe("Disclosure.Panel"),a=m(t,(()=>{n.linkedPanel||o({type:4})})),s=O(),l=null!==s?0===s:0===n.disclosureState;(0,r.useEffect)((()=>()=>o({type:5})),[o]),(0,r.useEffect)((()=>{var t;1===n.disclosureState&&(null==(t=e.unmount)||t)&&o({type:5})}),[n.disclosureState,e.unmount,o]);let u=(0,r.useMemo)((()=>({open:0===n.disclosureState,close:i})),[n,i]),c={ref:a,id:n.panelId},d=e;return r.createElement(Ce.Provider,{value:n.panelId},b({props:{...d,...c},slot:u,defaultTag:"div",features:3,visible:l,name:"Disclosure.Panel"}))}));we.Button=Re,we.Panel=Se;var Pe={1:e=>e.disabled||1===e.listboxState?e:{...e,activeOptionIndex:null,listboxState:1},0:e=>e.disabled||0===e.listboxState?e:{...e,listboxState:0},2:(e,t)=>e.disabled===t.disabled?e:{...e,disabled:t.disabled},3:(e,t)=>e.orientation===t.orientation?e:{...e,orientation:t.orientation},4(e,t){if(e.disabled||1===e.listboxState)return e;let n=g(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return""===e.searchQuery&&e.activeOptionIndex===n?e:{...e,searchQuery:"",activeOptionIndex:n}},5:(e,t)=>{if(e.disabled||1===e.listboxState)return e;let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),o=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find((e=>{var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))})),i=o?e.options.indexOf(o):-1;return-1===i||i===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:i}},6:e=>e.disabled||1===e.listboxState||""===e.searchQuery?e:{...e,searchQuery:""},7:(e,t)=>{var n;let r=Array.from(null==(n=e.optionsRef.current)?void 0:n.querySelectorAll('[id^="headlessui-listbox-option-"]')).reduce(((e,t,n)=>Object.assign(e,{[t.id]:n})),{}),o=[...e.options,{id:t.id,dataRef:t.dataRef}].sort(((e,t)=>r[e.id]-r[t.id]));return{...e,options:o}},8:(e,t)=>{let n=e.options.slice(),r=null!==e.activeOptionIndex?n[e.activeOptionIndex]:null,o=n.findIndex((e=>e.id===t.id));return-1!==o&&n.splice(o,1),{...e,options:n,activeOptionIndex:o===e.activeOptionIndex||null===r?null:n.indexOf(r)}}},Ie=(0,r.createContext)(null);function ke(e){let t=(0,r.useContext)(Ie);if(null===t){let t=new Error(`<${e} /> is missing a parent <${Ae.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ke),t}return t}function De(e,t){return v(t.type,Pe,e,t)}Ie.displayName="ListboxContext";var Fe=r.Fragment;function Ae(e){let{value:t,onChange:n,disabled:o=!1,horizontal:i=!1,...a}=e,l=i?"horizontal":"vertical",u=(0,r.useReducer)(De,{listboxState:1,propsRef:{current:{value:t,onChange:n}},labelRef:(0,r.createRef)(),buttonRef:(0,r.createRef)(),optionsRef:(0,r.createRef)(),disabled:o,orientation:l,options:[],searchQuery:"",activeOptionIndex:null}),[{listboxState:c,propsRef:d,optionsRef:p,buttonRef:h},f]=u;s((()=>{d.current.value=t}),[t,d]),s((()=>{d.current.onChange=n}),[n,d]),s((()=>f({type:2,disabled:o})),[o]),s((()=>f({type:3,orientation:l})),[l]),C("mousedown",(e=>{var t,n,r;let o=e.target;0===c&&((null==(t=h.current)?void 0:t.contains(o))||(null==(n=p.current)?void 0:n.contains(o))||(f({type:1}),H(o,1)||(e.preventDefault(),null==(r=h.current)||r.focus())))}));let m=(0,r.useMemo)((()=>({open:0===c,disabled:o})),[c,o]);return r.createElement(Ie.Provider,{value:u},r.createElement(w,{value:v(c,{0:0,1:1})},b({props:a,slot:m,defaultTag:Fe,name:"Listbox"})))}var Me=_((function(e,t){var n;let[o,i]=ke("Listbox.Button"),s=m(o.buttonRef,t),l=`headlessui-listbox-button-${p()}`,u=a(),c=(0,r.useCallback)((e=>{switch(e.key){case" ":case"Enter":case"ArrowDown":e.preventDefault(),i({type:0}),u.nextFrame((()=>{o.propsRef.current.value||i({type:4,focus:0})}));break;case"ArrowUp":e.preventDefault(),i({type:0}),u.nextFrame((()=>{o.propsRef.current.value||i({type:4,focus:3})}))}}),[i,o,u]),d=(0,r.useCallback)((e=>{if(" "===e.key)e.preventDefault()}),[]),h=(0,r.useCallback)((e=>{if(x(e.currentTarget))return e.preventDefault();0===o.listboxState?(i({type:1}),u.nextFrame((()=>{var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),i({type:0}))}),[i,u,o]),v=f((()=>{if(o.labelRef.current)return[o.labelRef.current.id,l].join(" ")}),[o.labelRef.current,l]),y=(0,r.useMemo)((()=>({open:0===o.listboxState,disabled:o.disabled})),[o]);return b({props:{...e,...{ref:s,id:l,type:S(e,o.buttonRef),"aria-haspopup":!0,"aria-controls":null==(n=o.optionsRef.current)?void 0:n.id,"aria-expanded":o.disabled?void 0:0===o.listboxState,"aria-labelledby":v,disabled:o.disabled,onKeyDown:c,onKeyUp:d,onClick:h}},slot:y,defaultTag:"button",name:"Listbox.Button"})}));var Le=_((function(e,t){var n;let[o,l]=ke("Listbox.Options"),u=m(o.optionsRef,t),c=`headlessui-listbox-options-${p()}`,d=a(),h=a(),y=O(),_=null!==y?0===y:0===o.listboxState;s((()=>{let e=o.optionsRef.current;!e||0===o.listboxState&&e!==document.activeElement&&e.focus({preventScroll:!0})}),[o.listboxState,o.optionsRef]);let E=(0,r.useCallback)((e=>{switch(h.dispose(),e.key){case" ":if(""!==o.searchQuery)return e.preventDefault(),e.stopPropagation(),l({type:5,value:e.key});case"Enter":if(e.preventDefault(),e.stopPropagation(),l({type:1}),null!==o.activeOptionIndex){let{dataRef:e}=o.options[o.activeOptionIndex];o.propsRef.current.onChange(e.current.value)}i().nextFrame((()=>{var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case v(o.orientation,{vertical:"ArrowDown",horizontal:"ArrowRight"}):return e.preventDefault(),e.stopPropagation(),l({type:4,focus:2});case v(o.orientation,{vertical:"ArrowUp",horizontal:"ArrowLeft"}):return e.preventDefault(),e.stopPropagation(),l({type:4,focus:1});case"Home":case"PageUp":return e.preventDefault(),e.stopPropagation(),l({type:4,focus:0});case"End":case"PageDown":return e.preventDefault(),e.stopPropagation(),l({type:4,focus:3});case"Escape":return e.preventDefault(),e.stopPropagation(),l({type:1}),d.nextFrame((()=>{var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case"Tab":e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(l({type:5,value:e.key}),h.setTimeout((()=>l({type:6})),350))}}),[d,l,h,o]),g=f((()=>{var e,t,n;return null!=(n=null==(e=o.labelRef.current)?void 0:e.id)?n:null==(t=o.buttonRef.current)?void 0:t.id}),[o.labelRef.current,o.buttonRef.current]),x=(0,r.useMemo)((()=>({open:0===o.listboxState})),[o]);return b({props:{...e,...{"aria-activedescendant":null===o.activeOptionIndex||null==(n=o.options[o.activeOptionIndex])?void 0:n.id,"aria-labelledby":g,"aria-orientation":o.orientation,id:c,onKeyDown:E,role:"listbox",tabIndex:0,ref:u}},slot:x,defaultTag:"ul",features:3,visible:_,name:"Listbox.Options"})}));Ae.Button=Me,Ae.Label=function(e){let[t]=ke("Listbox.Label"),n=`headlessui-listbox-label-${p()}`,o=(0,r.useCallback)((()=>{var e;return null==(e=t.buttonRef.current)?void 0:e.focus({preventScroll:!0})}),[t.buttonRef]),i=(0,r.useMemo)((()=>({open:0===t.listboxState,disabled:t.disabled})),[t]);return b({props:{...e,...{ref:t.labelRef,id:n,onClick:o}},slot:i,defaultTag:"label",name:"Listbox.Label"})},Ae.Options=Le,Ae.Option=function(e){let{disabled:t=!1,value:n,...o}=e,[a,l]=ke("Listbox.Option"),u=`headlessui-listbox-option-${p()}`,c=null!==a.activeOptionIndex&&a.options[a.activeOptionIndex].id===u,d=a.propsRef.current.value===n,h=(0,r.useRef)({disabled:t,value:n});s((()=>{h.current.disabled=t}),[h,t]),s((()=>{h.current.value=n}),[h,n]),s((()=>{var e,t;h.current.textValue=null==(t=null==(e=document.getElementById(u))?void 0:e.textContent)?void 0:t.toLowerCase()}),[h,u]);let f=(0,r.useCallback)((()=>a.propsRef.current.onChange(n)),[a.propsRef,n]);s((()=>(l({type:7,id:u,dataRef:h}),()=>l({type:8,id:u}))),[h,u]),s((()=>{var e,t;0===a.listboxState&&(!d||(l({type:4,focus:4,id:u}),null==(t=null==(e=document.getElementById(u))?void 0:e.focus)||t.call(e)))}),[a.listboxState]),s((()=>{if(0!==a.listboxState||!c)return;let e=i();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=document.getElementById(u))?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[u,c,a.listboxState,a.activeOptionIndex]);let m=(0,r.useCallback)((e=>{if(t)return e.preventDefault();f(),l({type:1}),i().nextFrame((()=>{var e;return null==(e=a.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))}),[l,a.buttonRef,t,f]),v=(0,r.useCallback)((()=>{if(t)return l({type:4,focus:5});l({type:4,focus:4,id:u})}),[t,u,l]),y=(0,r.useCallback)((()=>{t||c||l({type:4,focus:4,id:u})}),[t,c,u,l]),_=(0,r.useCallback)((()=>{t||!c||l({type:4,focus:5})}),[t,c,l]),E=(0,r.useMemo)((()=>({active:c,selected:d,disabled:t})),[c,d,t]);return b({props:{...o,id:u,role:"option",tabIndex:!0===t?void 0:-1,"aria-disabled":!0===t||void 0,"aria-selected":!0===d||void 0,disabled:void 0,onClick:m,onFocus:v,onPointerMove:y,onMouseMove:y,onPointerLeave:_,onMouseLeave:_},slot:E,defaultTag:"li",name:"Listbox.Option"})};var Ue={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,menuState:0},2:(e,t)=>{let n=g(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return""===e.searchQuery&&e.activeItemIndex===n?e:{...e,searchQuery:"",activeItemIndex:n}},3:(e,t)=>{let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),o=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find((e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))&&!e.dataRef.current.disabled})),i=o?e.items.indexOf(o):-1;return-1===i||i===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:i}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{var n;let r=Array.from(null==(n=e.itemsRef.current)?void 0:n.querySelectorAll('[id^="headlessui-menu-item-"]')).reduce(((e,t,n)=>Object.assign(e,{[t.id]:n})),{}),o=[...e.items,{id:t.id,dataRef:t.dataRef}].sort(((e,t)=>r[e.id]-r[t.id]));return{...e,items:o}},6:(e,t)=>{let n=e.items.slice(),r=null!==e.activeItemIndex?n[e.activeItemIndex]:null,o=n.findIndex((e=>e.id===t.id));return-1!==o&&n.splice(o,1),{...e,items:n,activeItemIndex:o===e.activeItemIndex||null===r?null:n.indexOf(r)}}},ze=(0,r.createContext)(null);function Ne(e){let t=(0,r.useContext)(ze);if(null===t){let t=new Error(`<${e} /> is missing a parent <${$e.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ne),t}return t}function Be(e,t){return v(t.type,Ue,e,t)}ze.displayName="MenuContext";var Ve=r.Fragment;function $e(e){let t=(0,r.useReducer)(Be,{menuState:1,buttonRef:(0,r.createRef)(),itemsRef:(0,r.createRef)(),items:[],searchQuery:"",activeItemIndex:null}),[{menuState:n,itemsRef:o,buttonRef:i},a]=t;C("mousedown",(e=>{var t,r,s;let l=e.target;0===n&&((null==(t=i.current)?void 0:t.contains(l))||(null==(r=o.current)?void 0:r.contains(l))||(a({type:1}),H(l,1)||(e.preventDefault(),null==(s=i.current)||s.focus())))}));let s=(0,r.useMemo)((()=>({open:0===n})),[n]);return r.createElement(ze.Provider,{value:t},r.createElement(w,{value:v(n,{0:0,1:1})},b({props:e,slot:s,defaultTag:Ve,name:"Menu"})))}var He=_((function(e,t){var n;let[o,i]=Ne("Menu.Button"),s=m(o.buttonRef,t),l=`headlessui-menu-button-${p()}`,u=a(),c=(0,r.useCallback)((e=>{switch(e.key){case" ":case"Enter":case"ArrowDown":e.preventDefault(),e.stopPropagation(),i({type:0}),u.nextFrame((()=>i({type:2,focus:0})));break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),i({type:0}),u.nextFrame((()=>i({type:2,focus:3})))}}),[i,u]),d=(0,r.useCallback)((e=>{if(" "===e.key)e.preventDefault()}),[]),h=(0,r.useCallback)((t=>{if(x(t.currentTarget))return t.preventDefault();e.disabled||(0===o.menuState?(i({type:1}),u.nextFrame((()=>{var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),t.stopPropagation(),i({type:0})))}),[i,u,o,e.disabled]),f=(0,r.useMemo)((()=>({open:0===o.menuState})),[o]);return b({props:{...e,...{ref:s,id:l,type:S(e,o.buttonRef),"aria-haspopup":!0,"aria-controls":null==(n=o.itemsRef.current)?void 0:n.id,"aria-expanded":e.disabled?void 0:0===o.menuState,onKeyDown:c,onKeyUp:d,onClick:h}},slot:f,defaultTag:"button",name:"Menu.Button"})})),Ye=_((function(e,t){var n,o;let[s,l]=Ne("Menu.Items"),u=m(s.itemsRef,t),c=`headlessui-menu-items-${p()}`,d=a(),h=O(),f=null!==h?0===h:0===s.menuState;(0,r.useEffect)((()=>{let e=s.itemsRef.current;!e||0===s.menuState&&e!==document.activeElement&&e.focus({preventScroll:!0})}),[s.menuState,s.itemsRef]),P({container:s.itemsRef.current,enabled:0===s.menuState,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let v=(0,r.useCallback)((e=>{var t;switch(d.dispose(),e.key){case" ":if(""!==s.searchQuery)return e.preventDefault(),e.stopPropagation(),l({type:3,value:e.key});case"Enter":if(e.preventDefault(),e.stopPropagation(),l({type:1}),null!==s.activeItemIndex){let{id:e}=s.items[s.activeItemIndex];null==(t=document.getElementById(e))||t.click()}i().nextFrame((()=>{var e;return null==(e=s.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case"ArrowDown":return e.preventDefault(),e.stopPropagation(),l({type:2,focus:2});case"ArrowUp":return e.preventDefault(),e.stopPropagation(),l({type:2,focus:1});case"Home":case"PageUp":return e.preventDefault(),e.stopPropagation(),l({type:2,focus:0});case"End":case"PageDown":return e.preventDefault(),e.stopPropagation(),l({type:2,focus:3});case"Escape":e.preventDefault(),e.stopPropagation(),l({type:1}),i().nextFrame((()=>{var e;return null==(e=s.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case"Tab":e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(l({type:3,value:e.key}),d.setTimeout((()=>l({type:4})),350))}}),[l,d,s]),y=(0,r.useCallback)((e=>{if(" "===e.key)e.preventDefault()}),[]),_=(0,r.useMemo)((()=>({open:0===s.menuState})),[s]);return b({props:{...e,...{"aria-activedescendant":null===s.activeItemIndex||null==(n=s.items[s.activeItemIndex])?void 0:n.id,"aria-labelledby":null==(o=s.buttonRef.current)?void 0:o.id,id:c,onKeyDown:v,onKeyUp:y,role:"menu",tabIndex:0,ref:u}},slot:_,defaultTag:"div",features:3,visible:f,name:"Menu.Items"})})),Ke=r.Fragment;$e.Button=He,$e.Items=Ye,$e.Item=function(e){let{disabled:t=!1,onClick:n,...o}=e,[a,l]=Ne("Menu.Item"),u=`headlessui-menu-item-${p()}`,c=null!==a.activeItemIndex&&a.items[a.activeItemIndex].id===u;s((()=>{if(0!==a.menuState||!c)return;let e=i();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=document.getElementById(u))?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[u,c,a.menuState,a.activeItemIndex]);let d=(0,r.useRef)({disabled:t});s((()=>{d.current.disabled=t}),[d,t]),s((()=>{var e,t;d.current.textValue=null==(t=null==(e=document.getElementById(u))?void 0:e.textContent)?void 0:t.toLowerCase()}),[d,u]),s((()=>(l({type:5,id:u,dataRef:d}),()=>l({type:6,id:u}))),[d,u]);let h=(0,r.useCallback)((e=>t?e.preventDefault():(l({type:1}),i().nextFrame((()=>{var e;return null==(e=a.buttonRef.current)?void 0:e.focus({preventScroll:!0})})),n?n(e):void 0)),[l,a.buttonRef,t,n]),f=(0,r.useCallback)((()=>{if(t)return l({type:2,focus:5});l({type:2,focus:4,id:u})}),[t,u,l]),m=(0,r.useCallback)((()=>{t||c||l({type:2,focus:4,id:u})}),[t,c,u,l]),v=(0,r.useCallback)((()=>{t||!c||l({type:2,focus:5})}),[t,c,l]),y=(0,r.useMemo)((()=>({active:c,disabled:t})),[c,t]);return b({props:{...o,id:u,role:"menuitem",tabIndex:!0===t?void 0:-1,"aria-disabled":!0===t||void 0,disabled:void 0,onClick:h,onFocus:f,onPointerMove:m,onMouseMove:m,onPointerLeave:v,onMouseLeave:v},slot:y,defaultTag:Ke,name:"Menu.Item"})};var je={0:e=>({...e,popoverState:v(e.popoverState,{0:1,1:0})}),1:e=>1===e.popoverState?e:{...e,popoverState:1},2:(e,t)=>e.button===t.button?e:{...e,button:t.button},3:(e,t)=>e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId},4:(e,t)=>e.panel===t.panel?e:{...e,panel:t.panel},5:(e,t)=>e.panelId===t.panelId?e:{...e,panelId:t.panelId}},Qe=(0,r.createContext)(null);function Ze(e){let t=(0,r.useContext)(Qe);if(null===t){let t=new Error(`<${e} /> is missing a parent <${tt.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ze),t}return t}Qe.displayName="PopoverContext";var We=(0,r.createContext)(null);function Ge(e){let t=(0,r.useContext)(We);if(null===t){let t=new Error(`<${e} /> is missing a parent <${tt.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ge),t}return t}We.displayName="PopoverAPIContext";var Xe=(0,r.createContext)(null);function qe(){return(0,r.useContext)(Xe)}Xe.displayName="PopoverGroupContext";var Je=(0,r.createContext)(null);function et(e,t){return v(t.type,je,e,t)}Je.displayName="PopoverPanelContext";function tt(e){let t=`headlessui-popover-button-${p()}`,n=`headlessui-popover-panel-${p()}`,o=(0,r.useReducer)(et,{popoverState:1,button:null,buttonId:t,panel:null,panelId:n}),[{popoverState:i,button:a,panel:s},l]=o;(0,r.useEffect)((()=>l({type:3,buttonId:t})),[t,l]),(0,r.useEffect)((()=>l({type:5,panelId:n})),[n,l]);let u=(0,r.useMemo)((()=>({buttonId:t,panelId:n,close:()=>l({type:1})})),[t,n,l]),c=qe(),d=null==c?void 0:c.registerPopover,h=(0,r.useCallback)((()=>{var e;return null!=(e=null==c?void 0:c.isFocusWithinPopoverGroup())?e:(null==a?void 0:a.contains(document.activeElement))||(null==s?void 0:s.contains(document.activeElement))}),[c,a,s]);(0,r.useEffect)((()=>null==d?void 0:d(u)),[d,u]),C("focus",(()=>{0===i&&(h()||!a||!s||l({type:1}))}),!0),C("mousedown",(e=>{let t=e.target;0===i&&((null==a?void 0:a.contains(t))||(null==s?void 0:s.contains(t))||(l({type:1}),H(t,1)||(e.preventDefault(),null==a||a.focus())))}));let f=(0,r.useCallback)((e=>{l({type:1});let t=e?e instanceof HTMLElement?e:e.current instanceof HTMLElement?e.current:a:a;null==t||t.focus()}),[l,a]),m=(0,r.useMemo)((()=>({close:f})),[f]),y=(0,r.useMemo)((()=>({open:0===i,close:f})),[i,f]);return r.createElement(Qe.Provider,{value:o},r.createElement(We.Provider,{value:m},r.createElement(w,{value:v(i,{0:0,1:1})},b({props:e,slot:y,defaultTag:"div",name:"Popover"}))))}var nt=_((function(e,t){let[n,o]=Ze("Popover.Button"),i=(0,r.useRef)(null),a=qe(),s=null==a?void 0:a.closeOthers,l=(0,r.useContext)(Je),u=null!==l&&l===n.panelId,c=m(i,t,u?null:e=>o({type:2,button:e})),d=m(i,t),p=(0,r.useRef)(null),h=(0,r.useRef)("undefined"==typeof window?null:document.activeElement);C("focus",(()=>{h.current=p.current,p.current=document.activeElement}),!0);let f=(0,r.useCallback)((e=>{var t,r;if(u){if(1===n.popoverState)return;switch(e.key){case" ":case"Enter":e.preventDefault(),e.stopPropagation(),o({type:1}),null==(t=n.button)||t.focus()}}else switch(e.key){case" ":case"Enter":e.preventDefault(),e.stopPropagation(),1===n.popoverState&&(null==s||s(n.buttonId)),o({type:0});break;case"Escape":if(0!==n.popoverState)return null==s?void 0:s(n.buttonId);if(!i.current||!i.current.contains(document.activeElement))return;e.preventDefault(),e.stopPropagation(),o({type:1});break;case"Tab":if(0!==n.popoverState||!n.panel||!n.button)return;if(e.shiftKey){if(!h.current||(null==(r=n.button)?void 0:r.contains(h.current))||n.panel.contains(h.current))return;let t=$(),o=t.indexOf(h.current);if(t.indexOf(n.button)>o)return;e.preventDefault(),e.stopPropagation(),K(n.panel,8)}else e.preventDefault(),e.stopPropagation(),K(n.panel,1)}}),[o,n.popoverState,n.buttonId,n.button,n.panel,i,s,u]),v=(0,r.useCallback)((e=>{var t;if(!u&&(" "===e.key&&e.preventDefault(),0===n.popoverState&&n.panel&&n.button)&&"Tab"===e.key){if(!h.current||(null==(t=n.button)?void 0:t.contains(h.current))||n.panel.contains(h.current))return;let r=$(),o=r.indexOf(h.current);if(r.indexOf(n.button)>o)return;e.preventDefault(),e.stopPropagation(),K(n.panel,8)}}),[n.popoverState,n.panel,n.button,u]),y=(0,r.useCallback)((t=>{var r,i;x(t.currentTarget)||e.disabled||(u?(o({type:1}),null==(r=n.button)||r.focus()):(1===n.popoverState&&(null==s||s(n.buttonId)),null==(i=n.button)||i.focus(),o({type:0})))}),[o,n.button,n.popoverState,n.buttonId,e.disabled,s,u]),_=(0,r.useMemo)((()=>({open:0===n.popoverState})),[n]),E=S(e,i);return b({props:{...e,...u?{ref:d,type:E,onKeyDown:f,onClick:y}:{ref:c,id:n.buttonId,type:E,"aria-expanded":e.disabled?void 0:0===n.popoverState,"aria-controls":n.panel?n.panelId:void 0,onKeyDown:f,onKeyUp:v,onClick:y}},slot:_,defaultTag:"button",name:"Popover.Button"})})),rt=_((function(e,t){let[{popoverState:n},o]=Ze("Popover.Overlay"),i=m(t),a=`headlessui-popover-overlay-${p()}`,s=O(),l=null!==s?0===s:0===n;return b({props:{...e,ref:i,id:a,"aria-hidden":!0,onClick:(0,r.useCallback)((e=>{if(x(e.currentTarget))return e.preventDefault();o({type:1})}),[o])},slot:(0,r.useMemo)((()=>({open:0===n})),[n]),defaultTag:"div",features:3,visible:l,name:"Popover.Overlay"})})),ot=_((function(e,t){let{focus:n=!1,...o}=e,[i,a]=Ze("Popover.Panel"),{close:s}=Ge("Popover.Panel"),l=(0,r.useRef)(null),u=m(l,t,(e=>{a({type:4,panel:e})})),c=O(),d=null!==c?0===c:0===i.popoverState,p=(0,r.useCallback)((e=>{var t;if("Escape"===e.key){if(0!==i.popoverState||!l.current||!l.current.contains(document.activeElement))return;e.preventDefault(),e.stopPropagation(),a({type:1}),null==(t=i.button)||t.focus()}}),[i,l,a]);(0,r.useEffect)((()=>()=>a({type:4,panel:null})),[a]),(0,r.useEffect)((()=>{var t;e.static||1===i.popoverState&&(null==(t=e.unmount)||t)&&a({type:4,panel:null})}),[i.popoverState,e.unmount,e.static,a]),(0,r.useEffect)((()=>{if(!n||0!==i.popoverState||!l.current)return;let e=document.activeElement;l.current.contains(e)||K(l.current,1)}),[n,l,i.popoverState]),C("keydown",(e=>{var t;if(0!==i.popoverState||!l.current||"Tab"!==e.key||!document.activeElement||!l.current||!l.current.contains(document.activeElement))return;e.preventDefault();let n=K(l.current,e.shiftKey?2:4);if(3===n)return null==(t=i.button)?void 0:t.focus();if(1===n){if(!i.button)return;let e=$(),t=e.indexOf(i.button);0===K(e.splice(t+1).filter((e=>{var t;return!(null==(t=l.current)?void 0:t.contains(e))})),1)&&K(document.body,1)}})),C("focus",(()=>{var e;!n||0===i.popoverState&&(!l.current||(null==(e=l.current)?void 0:e.contains(document.activeElement))||a({type:1}))}),!0);let h=(0,r.useMemo)((()=>({open:0===i.popoverState,close:s})),[i,s]),f={ref:u,id:i.panelId,onKeyDown:p};return r.createElement(Je.Provider,{value:i.panelId},b({props:{...o,...f},slot:h,defaultTag:"div",features:3,visible:d,name:"Popover.Panel"}))}));tt.Button=nt,tt.Overlay=rt,tt.Panel=ot,tt.Group=function(e){let t=(0,r.useRef)(null),[n,o]=(0,r.useState)([]),i=(0,r.useCallback)((e=>{o((t=>{let n=t.indexOf(e);if(-1!==n){let e=t.slice();return e.splice(n,1),e}return t}))}),[o]),a=(0,r.useCallback)((e=>(o((t=>[...t,e])),()=>i(e))),[o,i]),s=(0,r.useCallback)((()=>{var e;let r=document.activeElement;return!!(null==(e=t.current)?void 0:e.contains(r))||n.some((e=>{var t,n;return(null==(t=document.getElementById(e.buttonId))?void 0:t.contains(r))||(null==(n=document.getElementById(e.panelId))?void 0:n.contains(r))}))}),[t,n]),l=(0,r.useCallback)((e=>{for(let t of n)t.buttonId!==e&&t.close()}),[n]),u=(0,r.useMemo)((()=>({registerPopover:a,unregisterPopover:i,isFocusWithinPopoverGroup:s,closeOthers:l})),[a,i,s,l]),c=(0,r.useMemo)((()=>({})),[]),d={ref:t},p=e;return r.createElement(Xe.Provider,{value:u},b({props:{...p,...d},slot:c,defaultTag:"div",name:"Popover.Group"}))};var it=(0,r.createContext)(null);function at(){let e=(0,r.useContext)(it);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,at),e}return e}function st(){let[e,t]=(0,r.useState)([]);return[e.length>0?e.join(" "):void 0,(0,r.useMemo)((()=>function(e){let n=(0,r.useCallback)((e=>(t((t=>[...t,e])),()=>t((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n})))),[]),o=(0,r.useMemo)((()=>({register:n,slot:e.slot,name:e.name,props:e.props})),[n,e.slot,e.name,e.props]);return r.createElement(it.Provider,{value:o},e.children)}),[t])]}function lt(e){let{passive:t=!1,...n}=e,r=at(),o=`headlessui-label-${p()}`;s((()=>r.register(o)),[o,r.register]);let i={...n,...{...r.props,id:o}};return t&&delete i.onClick,b({props:i,slot:r.slot||{},defaultTag:"label",name:r.name||"Label"})}var ut={0:(e,t)=>({...e,options:[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}]}),1(e,t){let n=e.options.slice(),r=e.options.findIndex((e=>e.id===t.id));return-1===r?e:(n.splice(r,1),{...e,options:n})}},ct=(0,r.createContext)(null);function dt(e){let t=(0,r.useContext)(ct);if(null===t){let t=new Error(`<${e} /> is missing a parent <${ht.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,dt),t}return t}function pt(e,t){return v(t.type,ut,e,t)}ct.displayName="RadioGroupContext";function ht(e){let{value:t,onChange:n,disabled:o=!1,...i}=e,[{options:a},s]=(0,r.useReducer)(pt,{options:[]}),[l,u]=st(),[c,d]=se(),h=`headlessui-radiogroup-${p()}`,f=(0,r.useRef)(null),m=(0,r.useMemo)((()=>a.find((e=>!e.propsRef.current.disabled))),[a]),v=(0,r.useMemo)((()=>a.some((e=>e.propsRef.current.value===t))),[a,t]),y=(0,r.useCallback)((e=>{var r;if(o||e===t)return!1;let i=null==(r=a.find((t=>t.propsRef.current.value===e)))?void 0:r.propsRef.current;return!(null==i?void 0:i.disabled)&&(n(e),!0)}),[n,t,o,a]);P({container:f.current,accept:e=>"radio"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let _=(0,r.useCallback)((e=>{if(!f.current)return;let t=a.filter((e=>!1===e.propsRef.current.disabled)).map((e=>e.element.current));switch(e.key){case"ArrowLeft":case"ArrowUp":if(e.preventDefault(),e.stopPropagation(),2===K(t,18)){let e=a.find((e=>e.element.current===document.activeElement));e&&y(e.propsRef.current.value)}break;case"ArrowRight":case"ArrowDown":if(e.preventDefault(),e.stopPropagation(),2===K(t,20)){let e=a.find((e=>e.element.current===document.activeElement));e&&y(e.propsRef.current.value)}break;case" ":{e.preventDefault(),e.stopPropagation();let t=a.find((e=>e.element.current===document.activeElement));t&&y(t.propsRef.current.value)}}}),[f,a,y]),E=(0,r.useCallback)((e=>(s({type:0,...e}),()=>s({type:1,id:e.id}))),[s]),g=(0,r.useMemo)((()=>({registerOption:E,firstOption:m,containsCheckedOption:v,change:y,disabled:o,value:t})),[E,m,v,y,o,t]),x={ref:f,id:h,role:"radiogroup","aria-labelledby":l,"aria-describedby":c,onKeyDown:_};return r.createElement(d,{name:"RadioGroup.Description"},r.createElement(u,{name:"RadioGroup.Label"},r.createElement(ct.Provider,{value:g},b({props:{...i,...x},defaultTag:"div",name:"RadioGroup"}))))}ht.Option=function(e){let t=(0,r.useRef)(null),n=`headlessui-radiogroup-option-${p()}`,[o,i]=st(),[a,l]=se(),{addFlag:u,removeFlag:c,hasFlag:d}=function(e=0){let[t,n]=(0,r.useState)(e);return{addFlag:(0,r.useCallback)((e=>n((t=>t|e))),[n]),hasFlag:(0,r.useCallback)((e=>Boolean(t&e)),[t]),removeFlag:(0,r.useCallback)((e=>n((t=>t&~e))),[n]),toggleFlag:(0,r.useCallback)((e=>n((t=>t^e))),[n])}}(1),{value:h,disabled:f=!1,...m}=e,v=(0,r.useRef)({value:h,disabled:f});s((()=>{v.current.value=h}),[h,v]),s((()=>{v.current.disabled=f}),[f,v]);let{registerOption:y,disabled:_,change:E,firstOption:g,containsCheckedOption:x,value:C}=dt("RadioGroup.Option");s((()=>y({id:n,element:t,propsRef:v})),[n,y,t,e]);let T=(0,r.useCallback)((()=>{var e;!E(h)||(u(2),null==(e=t.current)||e.focus())}),[u,E,h]),O=(0,r.useCallback)((()=>u(2)),[u]),w=(0,r.useCallback)((()=>c(2)),[c]),R=(null==g?void 0:g.id)===n,S=_||f,P=C===h,I={ref:t,id:n,role:"radio","aria-checked":P?"true":"false","aria-labelledby":o,"aria-describedby":a,"aria-disabled":!!S||void 0,tabIndex:S?-1:P||!x&&R?0:-1,onClick:S?void 0:T,onFocus:S?void 0:O,onBlur:S?void 0:w},k=(0,r.useMemo)((()=>({checked:P,disabled:S,active:d(2)})),[P,S,d]);return r.createElement(l,{name:"RadioGroup.Description"},r.createElement(i,{name:"RadioGroup.Label"},b({props:{...m,...I},slot:k,defaultTag:"div",name:"RadioGroup.Option"})))},ht.Label=lt,ht.Description=le;var ft=(0,r.createContext)(null);ft.displayName="GroupContext";var mt=r.Fragment;function vt(e){let{checked:t,onChange:n,...o}=e,i=`headlessui-switch-${p()}`,a=(0,r.useContext)(ft),s=(0,r.useRef)(null),l=m(s,null===a?null:a.setSwitch),u=(0,r.useCallback)((()=>n(!t)),[n,t]),c=(0,r.useCallback)((e=>{if(x(e.currentTarget))return e.preventDefault();e.preventDefault(),u()}),[u]),d=(0,r.useCallback)((e=>{"Tab"!==e.key&&e.preventDefault()," "===e.key&&u()}),[u]),h=(0,r.useCallback)((e=>e.preventDefault()),[]),f=(0,r.useMemo)((()=>({checked:t})),[t]);return b({props:{...o,...{id:i,ref:l,role:"switch",type:S(e,s),tabIndex:0,"aria-checked":t,"aria-labelledby":null==a?void 0:a.labelledby,"aria-describedby":null==a?void 0:a.describedby,onClick:c,onKeyUp:d,onKeyPress:h}},slot:f,defaultTag:"button",name:"Switch"})}vt.Group=function(e){let[t,n]=(0,r.useState)(null),[o,i]=st(),[a,s]=se(),l=(0,r.useMemo)((()=>({switch:t,setSwitch:n,labelledby:o,describedby:a})),[t,n,o,a]);return r.createElement(s,{name:"Switch.Description"},r.createElement(i,{name:"Switch.Label",props:{onClick(){!t||(t.click(),t.focus({preventScroll:!0}))}}},r.createElement(ft.Provider,{value:l},b({props:e,defaultTag:mt,name:"Switch.Group"}))))},vt.Label=lt,vt.Description=le;var bt={0:(e,t)=>e.selectedIndex===t.index?e:{...e,selectedIndex:t.index},1:(e,t)=>e.orientation===t.orientation?e:{...e,orientation:t.orientation},2:(e,t)=>e.activation===t.activation?e:{...e,activation:t.activation},3:(e,t)=>e.tabs.includes(t.tab)?e:{...e,tabs:[...e.tabs,t.tab]},4:(e,t)=>({...e,tabs:e.tabs.filter((e=>e!==t.tab))}),5:(e,t)=>e.panels.includes(t.panel)?e:{...e,panels:[...e.panels,t.panel]},6:(e,t)=>({...e,panels:e.panels.filter((e=>e!==t.panel))}),7:e=>({...e})},yt=(0,r.createContext)(null);function _t(e){let t=(0,r.useContext)(yt);if(null===t){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,_t),t}return t}function Et(e,t){return v(t.type,bt,e,t)}yt.displayName="TabsContext";var gt=r.Fragment;function xt(e){var t,n;let o=`headlessui-tabs-tab-${p()}`,[{selectedIndex:i,tabs:a,panels:l,orientation:u,activation:c},{dispatch:d,change:h}]=_t(xt.name),f=(0,r.useRef)(null),y=m(f,(e=>{!e||d({type:7})}));s((()=>(d({type:3,tab:f}),()=>d({type:4,tab:f}))),[d,f]);let _=a.indexOf(f),E=_===i,g=(0,r.useCallback)((e=>{let t=a.map((e=>e.current)).filter(Boolean);if(" "===e.key||"Enter"===e.key)return e.preventDefault(),e.stopPropagation(),void h(_);switch(e.key){case"Home":case"PageUp":return e.preventDefault(),e.stopPropagation(),K(t,1);case"End":case"PageDown":return e.preventDefault(),e.stopPropagation(),K(t,8)}return v(u,{vertical:()=>"ArrowUp"===e.key?K(t,18):"ArrowDown"===e.key?K(t,20):void 0,horizontal:()=>"ArrowLeft"===e.key?K(t,18):"ArrowRight"===e.key?K(t,20):void 0})}),[a,u,_,h]),x=(0,r.useCallback)((()=>{var e;null==(e=f.current)||e.focus()}),[f]),C=(0,r.useCallback)((()=>{var e;null==(e=f.current)||e.focus(),h(_)}),[h,_,f]),T=(0,r.useMemo)((()=>({selected:E})),[E]),O={ref:y,onKeyDown:g,onFocus:"manual"===c?x:C,onClick:C,id:o,role:"tab",type:S(e,f),"aria-controls":null==(n=null==(t=l[_])?void 0:t.current)?void 0:n.id,"aria-selected":E,tabIndex:E?0:-1};return b({props:{...e,...O},slot:T,defaultTag:"button",name:"Tabs.Tab"})}function Ct(e,...t){e&&t.length>0&&e.classList.add(...t)}function Tt(e,...t){e&&t.length>0&&e.classList.remove(...t)}function Ot(e,t,n,r,o,a){let s=i(),l=void 0!==a?function(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}(a):()=>{};return Tt(e,...o),Ct(e,...t,...n),s.nextFrame((()=>{Tt(e,...n),Ct(e,...r),s.add(function(e,t){let n=i();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:o}=getComputedStyle(e),[a,s]=[r,o].map((e=>{let[t=0]=e.split(",").filter(Boolean).map((e=>e.includes("ms")?parseFloat(e):1e3*parseFloat(e))).sort(((e,t)=>t-e));return t}));return 0!==a?n.setTimeout((()=>{t("finished")}),a+s):t("finished"),n.add((()=>t("cancelled"))),n.dispose}(e,(n=>(Tt(e,...r,...t),Ct(e,...o),l(n)))))})),s.add((()=>Tt(e,...t,...n,...r,...o))),s.add((()=>l("cancelled"))),s.dispose}function wt(e=""){return(0,r.useMemo)((()=>e.split(" ").filter((e=>e.trim().length>1))),[e])}xt.Group=function(e){let{defaultIndex:t=0,vertical:n=!1,manual:o=!1,onChange:i,selectedIndex:a=null,...s}=e,l=n?"vertical":"horizontal",u=o?"manual":"auto",[c,d]=(0,r.useReducer)(Et,{selectedIndex:null,tabs:[],panels:[],orientation:l,activation:u}),p=(0,r.useMemo)((()=>({selectedIndex:c.selectedIndex})),[c.selectedIndex]),h=(0,r.useRef)((()=>{}));(0,r.useEffect)((()=>{d({type:1,orientation:l})}),[l]),(0,r.useEffect)((()=>{d({type:2,activation:u})}),[u]),(0,r.useEffect)((()=>{"function"==typeof i&&(h.current=i)}),[i]),(0,r.useEffect)((()=>{if(c.tabs.length<=0||null===a&&null!==c.selectedIndex)return;let e=c.tabs.map((e=>e.current)).filter(Boolean),n=e.filter((e=>!e.hasAttribute("disabled"))),r=null!=a?a:t;if(r<0)d({type:0,index:e.indexOf(n[0])});else if(r>c.tabs.length)d({type:0,index:e.indexOf(n[n.length-1])});else{let t=e.slice(0,r),o=[...e.slice(r),...t].find((e=>n.includes(e)));if(!o)return;d({type:0,index:e.indexOf(o)})}}),[t,a,c.tabs,c.selectedIndex]);let f=(0,r.useRef)(c.selectedIndex);(0,r.useEffect)((()=>{f.current=c.selectedIndex}),[c.selectedIndex]);let m=(0,r.useMemo)((()=>[c,{dispatch:d,change(e){f.current!==e&&h.current(e),f.current=e,d({type:0,index:e})}}]),[c,d]);return r.createElement(yt.Provider,{value:m},b({props:{...s},slot:p,defaultTag:gt,name:"Tabs"}))},xt.List=function(e){let[{selectedIndex:t,orientation:n}]=_t("Tab.List");return b({props:{...e,role:"tablist","aria-orientation":n},slot:{selectedIndex:t},defaultTag:"div",name:"Tabs.List"})},xt.Panels=function(e){let[{selectedIndex:t}]=_t("Tab.Panels");return b({props:e,slot:(0,r.useMemo)((()=>({selectedIndex:t})),[t]),defaultTag:"div",name:"Tabs.Panels"})},xt.Panel=function(e){var t,n;let[{selectedIndex:o,tabs:i,panels:a},{dispatch:l}]=_t("Tab.Panel"),u=`headlessui-tabs-panel-${p()}`,c=(0,r.useRef)(null),d=m(c,(e=>{!e||l({type:7})}));s((()=>(l({type:5,panel:c}),()=>l({type:6,panel:c}))),[l,c]);let h=a.indexOf(c),f=h===o,v=(0,r.useMemo)((()=>({selected:f})),[f]);return b({props:{...e,...{ref:d,id:u,role:"tabpanel","aria-labelledby":null==(n=null==(t=i[h])?void 0:t.current)?void 0:n.id,tabIndex:f?0:-1}},slot:v,defaultTag:"div",features:3,visible:f,name:"Tabs.Panel"})};var Rt=(0,r.createContext)(null);Rt.displayName="TransitionContext";var St=(0,r.createContext)(null);function Pt(e){return"children"in e?Pt(e.children):e.current.filter((({state:e})=>"visible"===e)).length>0}function It(e){let t=(0,r.useRef)(e),n=(0,r.useRef)([]),o=j();(0,r.useEffect)((()=>{t.current=e}),[e]);let i=(0,r.useCallback)(((e,r=1)=>{var i;let a=n.current.findIndex((({id:t})=>t===e));-1!==a&&(v(r,{0(){n.current.splice(a,1)},1(){n.current[a].state="hidden"}}),!Pt(n)&&o.current&&(null==(i=t.current)||i.call(t)))}),[t,o,n]),a=(0,r.useCallback)((e=>{let t=n.current.find((({id:t})=>t===e));return t?"visible"!==t.state&&(t.state="visible"):n.current.push({id:e,state:"visible"}),()=>i(e,0)}),[n,i]);return(0,r.useMemo)((()=>({children:n,register:a,unregister:i})),[a,i,n])}function kt(){}St.displayName="NestingContext";var Dt=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Ft(e){var t;let n={};for(let r of Dt)n[r]=null!=(t=e[r])?t:kt;return n}function At(e){let{beforeEnter:t,afterEnter:n,beforeLeave:o,afterLeave:i,enter:a,enterFrom:l,enterTo:c,entered:d,leave:h,leaveFrom:f,leaveTo:m,...y}=e,_=(0,r.useRef)(null),[E,g]=(0,r.useState)("visible"),x=y.unmount?0:1,{show:C,appear:T,initial:O}=function(){let e=(0,r.useContext)(Rt);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:R,unregister:S}=function(){let e=(0,r.useContext)(St);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),P=p(),I=(0,r.useRef)(!1),k=It((()=>{I.current||(g("hidden"),S(P),N.current.afterLeave())}));s((()=>{if(P)return R(P)}),[R,P]),s((()=>{if(1===x&&P){if(C&&"visible"!==E)return void g("visible");v(E,{hidden:()=>S(P),visible:()=>R(P)})}}),[E,P,R,S,C,x]);let D=wt(a),F=wt(l),A=wt(c),M=wt(d),L=wt(h),U=wt(f),z=wt(m),N=function(e){let t=(0,r.useRef)(Ft(e));return(0,r.useEffect)((()=>{t.current=Ft(e)}),[e]),t}({beforeEnter:t,afterEnter:n,beforeLeave:o,afterLeave:i}),B=u();(0,r.useEffect)((()=>{if(B&&"visible"===E&&null===_.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[_,E,B]);let V=O&&!T;s((()=>{let e=_.current;if(e&&!V)return I.current=!0,C&&N.current.beforeEnter(),C||N.current.beforeLeave(),C?Ot(e,D,F,A,M,(e=>{I.current=!1,"finished"===e&&N.current.afterEnter()})):Ot(e,L,U,z,M,(e=>{I.current=!1,"finished"===e&&(Pt(k)||(g("hidden"),S(P),N.current.afterLeave()))}))}),[N,P,I,S,k,_,V,C,D,F,A,L,U,z]);let $={ref:_},H=y;return r.createElement(St.Provider,{value:k},r.createElement(w,{value:v(E,{visible:0,hidden:1})},b({props:{...H,...$},defaultTag:"div",features:1,visible:"visible"===E,name:"Transition.Child"})))}function Mt(e){let{show:t,appear:n=!1,unmount:o,...i}=e,a=O();if(void 0===t&&null!==a&&(t=v(a,{0:!0,1:!1})),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[s,l]=(0,r.useState)(t?"visible":"hidden"),u=It((()=>{l("hidden")})),c=function(){let e=(0,r.useRef)(!0);return(0,r.useEffect)((()=>{e.current=!1}),[]),e.current}(),d=(0,r.useMemo)((()=>({show:t,appear:n||!c,initial:c})),[t,n,c]);(0,r.useEffect)((()=>{t?l("visible"):Pt(u)||l("hidden")}),[t,u]);let p={unmount:o};return r.createElement(St.Provider,{value:u},r.createElement(Rt.Provider,{value:d},b({props:{...p,as:r.Fragment,children:r.createElement(At,{...p,...i})},defaultTag:r.Fragment,features:1,visible:"visible"===s,name:"Transition"})))}Mt.Child=function(e){let t=null!==(0,r.useContext)(Rt),n=null!==O();return!t&&n?r.createElement(Mt,{...e}):r.createElement(At,{...e})},Mt.Root=Mt}}]);